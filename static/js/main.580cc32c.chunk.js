(this["webpackJsonppathologic-companion"]=this["webpackJsonppathologic-companion"]||[]).push([[0],{136:function(e,t,n){e.exports=n(233)},141:function(e,t,n){},142:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(22),o=n.n(i),s=(n(141),n(3)),c=n(5),l=n(7),u=n(6),p=n(8),d=(n(142),n(243)),h=n(19),m=n(133),f=["xs","sm","md","lg","xl"];function g(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,a=e.unit,r=void 0===a?"px":a,i=e.step,o=void 0===i?5:i,s=Object(m.a)(e,["values","unit","step"]);function c(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(r,")")}function l(e,t){var a=f.indexOf(t)+1;return a===f.length?c(e):"@media (min-width:".concat(n[e]).concat(r,") and ")+"(max-width:".concat(n[f[a]]-o/100).concat(r,")")}return Object(h.a)({keys:f,values:n,up:c,down:function(e){var t=f.indexOf(e)+1,a=n[f[t]];return t===f.length?c("xs"):"@media (max-width:".concat(("number"===typeof a&&t>0?a:e)-o/100).concat(r,")")},between:l,only:function(e){return l(e,e)},width:function(e){return n[e]}},s)}var v=new function e(){Object(s.a)(this,e),this.fillTime=1e3,this.particlesCount=60,this.fadingStart=.8,this.particlesTtlSpread=.1,this.fadingStartOn=this.fillTime*this.fadingStart,this.fadingDelta=1/this.fadingStartOn},y=new function e(){Object(s.a)(this,e),this.fadeTime=200,this.fadingDelta=1/this.fadeTime},b={activeTint:8458240,passedTint:4858649,charTints:["#021d3f","#D62F01","#400000","#ffffff"]},x={UI:{topPanelHeightFactor:.17,buttonPanelHeightFactor:.14,panelPaddingPx:20,buttonScalePc:7,undoPaddingFactor:.04,topTransitionHeightPx:166,bottomTransitionHeightPx:205,transitionElementWidthPx:2e3},worldWidth:9070,worldHeight:6200},w=new function e(){Object(s.a)(this,e),this.fromScale=7,this.toScale=2,this.time=250,this.deltaScale=(this.fromScale-this.toScale)/this.time,this.deltaAlpha=1/this.time},S=function(e){var t=~~(x.UI.buttonPanelHeightFactor*e.height)+2*x.UI.panelPaddingPx,n=~~(x.UI.buttonPanelHeightFactor*e.height),a=e.height-t-n;return k({top:t,bottom:n,middle:a,viewport:e})},k=function(e){return{breakpoints:g({values:{xs:0,sm:576,md:768,lg:992,xl:1200}}),pageSizes:e}},O=n(20),j=n(245),C=n(242),E=Object(C.a)({wrapper:{position:"absolute",left:200,top:100,width:600,height:1e3},cardRow:{display:"flex",justifyContent:"space-between",padding:"2vw"},card:{width:"15vw",height:"24vw"}}),T=function(e,t,n){return("width"===(n="vw"===(n="vh"===n?"height":n)?"width":n)||"height"===n?e[n]:"vmin"===n?e.height<e.width?e.height:e.width:e.height<e.width?e.width:e.height)*(t/100)};var P=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.controller)return this.props.children({renderModal:function(){return null},renderPixiBackdrop:function(){return null}});var t={sizes:function(e,t){var n=e.viewport,a=T(n,x.UI.buttonScalePc,"height")+~~(e.viewport.height*x.UI.undoPaddingFactor),r=T(n,t.h,"vh"),i=e.middle-a-r,o=T(n,t.w,"vw"),s=~~(1.7*r);return o>s&&(o=s),{height:r,width:o,left:~~((n.width-o)/2),pixiTop:i,bottom:e.bottom+a}}(this.props.pageSizes,this.props.controller.relativeSizes),pageSizes:this.props.pageSizes,update:function(){return e.forceUpdate()}};return this.props.controller.setProps(t),this.props.children({renderModal:function(){var n;return null===(n=e.props.controller)||void 0===n?void 0:n.renderModal(t)},renderPixiBackdrop:function(){var n;return null===(n=e.props.controller)||void 0===n?void 0:n.renderBackdrop(t)}})}}]),t}(a.Component),A=Object(j.a)(E)(P),M=n(131),z=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).theme=void 0,n.getTheme=function(e){return n.theme&&n.theme.pageSizes.viewport.height===e.height&&n.theme.pageSizes.viewport.width===e.width?n.theme:n.theme=S(e)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:"100vw",height:"100vh"}},r.a.createElement(M.a,null,(function(t){var n=e.getTheme(t);return r.a.createElement(d.a,{theme:n},e.props.children(n))})))}}]),t}(a.Component),H=n(31);function N(e,t){var n;return Object(h.a)({},I(1,t),(n={},Object(H.a)(n,e.breakpoints.down("sm"),Object(h.a)({},I(1,t))),Object(H.a)(n,e.breakpoints.down("md"),Object(h.a)({},I(1,t))),Object(H.a)(n,e.breakpoints.down("xl"),Object(h.a)({},I(3,t))),n))}function I(e,t){return{height:~~(x.UI.bottomTransitionHeightPx/e),backgroundSize:"".concat(~~(x.UI.transitionElementWidthPx/e),"px ").concat(~~(t/e),"px")}}var L=Object(C.a)({button:{"& :hover":{filter:"brightness(150%)"},width:"7vh",height:"7vh"},tooltip:{fontSize:"6vw",boxShadow:"10px 10px 30px 0px rgba(0,0,0,0.75)"}}),R=n(48),F=n.n(R),D=200,W=800,B=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).timerId=0,n.clickDelay=0,n.longPressDelay=0,n.holdStartTime=0,n.holding=!1,n.setProps=function(e){n.clickDelay=e.clickDelay||D,n.longPressDelay=e.longPressDelay||W,n.timerId&&clearTimeout(n.timerId),n.holding=!1,n.holdStartTime=0},n.touchStart=function(e){n.holdStartTime=Date.now(),n.holdStart()},n.mouseDown=function(e){n.holdStart()},n.mouseUp=function(e){n.holdEnd()},n.touchEnd=function(e){n.holdEnd()},n.holdStart=function(){n.timerId&&(clearTimeout(n.timerId),n.timerId=0),n.holdStartTime=Date.now(),n.holding=!0,n.props.onLongPressStart&&(n.timerId=setTimeout((function(){n.props.onLongPressStart()}),n.longPressDelay)),n.props.onDown&&n.props.onDown()},n.holdEnd=function(){var e=Date.now()-n.holdStartTime;n.timerId&&(clearTimeout(n.timerId),n.timerId=0);try{e<n.longPressDelay?n.props.onClick&&n.holding&&n.props.onClick():e>=n.longPressDelay&&n.props.onLongPressEnd&&n.props.onLongPressEnd()}finally{n.holding=!1}},n.setProps(e),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.props!==e&&this.setProps(this.props)}},{key:"componentWillUnmount",value:function(){this.timerId&&clearTimeout(this.timerId)}},{key:"render",value:function(){return r.a.createElement("div",{onMouseDown:B?void 0:this.mouseDown,onMouseUp:B?void 0:this.mouseUp,onTouchStartCapture:this.touchStart,onTouchEnd:this.touchEnd},this.props.children)}}]),t}(r.a.Component),_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).divRef=r.a.createRef(),n.onClick=function(){F.a.hide(n.divRef.current),n.props.tooltip&&!n.props.onClick&&(F.a.show(n.divRef.current),setTimeout((function(){return F.a.hide(n.divRef.current)}),0)),!n.props.onClick||!n.props.isActive&&n.props.unpressableInnactive||n.props.onClick()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=this,a=void 0===this.props.isVisible||this.props.isVisible,i=void 0===this.props.isActive||this.props.isActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{onClick:this.onClick,deb:this.props.iconHref,onLongPressStart:function(){return F.a.show(n.divRef.current)},onLongPressEnd:function(){return F.a.hide(n.divRef.current)}},r.a.createElement("div",{"data-tip":"","data-for":null===(e=this.props.tooltip)||void 0===e?void 0:e.id,ref:this.divRef,style:Object(h.a)({},{display:a?"block":"none",filter:i?"":"grayscale(1)"},{},this.props.styles),className:this.props.classes.button},r.a.createElement("img",{alt:this.props.iconHref,src:this.props.iconHref,style:{WebkitTouchCallout:"none"},height:"100%"}))),this.props.tooltip?r.a.createElement(F.a,{event:"mouseover",eventOff:"mouseout",id:this.props.tooltip.id,effect:"solid",place:(null===(t=this.props.tooltip)||void 0===t?void 0:t.direction)||"left",delayHide:1e3,delayShow:B?0:1e3,className:this.props.classes.tooltip},this.props.tooltip.tooltipHint):null)}}]),t}(r.a.Component),G=Object(j.a)(L)(_),V=n(15),K=n.n(V),X=n(17),q=n.n(X),$=n(28),Y=n.n($),J={area01:[{x:752,y:3572},{x:564,y:3428},{x:284,y:3072},{x:208,y:2908},{x:152,y:2680},{x:428,y:2500},{x:656,y:2276},{x:1084,y:1868},{x:1400,y:1564},{x:1784,y:1192},{x:2060,y:1004},{x:2296,y:896},{x:2468,y:820},{x:2740,y:728},{x:2744,y:840},{x:2580,y:1240},{x:2468,y:1612},{x:2432,y:1932},{x:2432,y:2336},{x:2476,y:2704},{x:2112,y:2748},{x:1820,y:2824},{x:1460,y:3024},{x:944,y:3388}],area02:[{x:2272,y:4712},{x:1952,y:4696},{x:1588,y:4552},{x:1312,y:4248},{x:852,y:3704},{x:756,y:3560},{x:1088,y:3280},{x:1360,y:3096},{x:1576,y:2944},{x:1888,y:2808},{x:2144,y:2752},{x:2464,y:2720},{x:2516,y:2900},{x:2528,y:3256},{x:2432,y:3608},{x:2276,y:4184},{x:2260,y:4708}],area03:[{x:2796,y:5760},{x:2648,y:5492},{x:2520,y:5072},{x:2448,y:4712},{x:2456,y:4208},{x:2540,y:3784},{x:3292,y:3744},{x:3704,y:3800},{x:3624,y:4532},{x:3756,y:5200}],area04:[{x:3772,y:5224},{x:3676,y:4908},{x:3640,y:4572},{x:3712,y:3796},{x:4932,y:3856},{x:4928,y:5352}],area05:[{x:4932,y:5364},{x:4940,y:3848},{x:5960,y:3960},{x:6252,y:4740},{x:6268,y:5636},{x:5360,y:5544}],area06:[{x:6468,y:4908},{x:6328,y:4280},{x:6132,y:3880},{x:6696,y:3440},{x:7096,y:3324},{x:7528,y:3456},{x:7812,y:3780},{x:8052,y:4216},{x:7888,y:4392},{x:7308,y:4728},{x:6636,y:4900}],area07:[{x:7392,y:3376},{x:7292,y:2728},{x:7316,y:2112},{x:7416,y:1756},{x:7896,y:1596},{x:8268,y:1984},{x:8544,y:2532},{x:8224,y:3432}],area08:[{x:6536,y:1728},{x:6432,y:1156},{x:6236,y:944},{x:5388,y:780},{x:5732,y:388},{x:6356,y:276},{x:7088,y:360},{x:7808,y:844},{x:7440,y:1128},{x:7356,y:1488},{x:7016,y:1704}],area09:[{x:5244,y:1884},{x:4968,y:1836},{x:4608,y:1708},{x:4260,y:1640},{x:3768,y:1640},{x:3824,y:1440},{x:3916,y:1008},{x:3936,y:784},{x:3868,y:612},{x:3920,y:560},{x:4132,y:416},{x:4296,y:360},{x:4684,y:324},{x:5052,y:344},{x:5328,y:424},{x:5212,y:992}],area10:[{x:3676,y:2276},{x:3208,y:2300},{x:2944,y:2252},{x:2768,y:2152},{x:2608,y:2020},{x:2560,y:1940},{x:2604,y:1592},{x:2700,y:1336},{x:2768,y:1180},{x:2864,y:1060},{x:3044,y:868},{x:3324,y:772},{x:3516,y:692},{x:3660,y:644},{x:3840,y:596},{x:3884,y:644},{x:3912,y:752},{x:3924,y:896},{x:3908,y:1020},{x:3824,y:1472},{x:3776,y:1620},{x:3744,y:1796}],area11:[{x:2544,y:3756},{x:2768,y:3724},{x:3044,y:3724},{x:3344,y:3756},{x:3636,y:3788},{x:3972,y:3792},{x:4332,y:3800},{x:4508,y:3364},{x:4096,y:3252},{x:3832,y:3052},{x:3704,y:2736},{x:3680,y:2312},{x:3680,y:2268},{x:3312,y:2300},{x:3008,y:2264},{x:2736,y:2124},{x:2560,y:1968},{x:2672,y:2832},{x:2712,y:3100}],area12:[{x:4332,y:3800},{x:4576,y:3064},{x:4720,y:2516},{x:4980,y:2320},{x:5368,y:2300},{x:5556,y:2644},{x:5972,y:3956}],area13:[{x:6116,y:3864},{x:5860,y:3156},{x:5772,y:2764},{x:6240,y:2472},{x:6408,y:2220},{x:6548,y:1744},{x:6864,y:1728},{x:7392,y:1468},{x:7436,y:1744},{x:7320,y:1980},{x:7344,y:3348},{x:6788,y:3384}],area14:[{x:5784,y:2764},{x:5560,y:2368},{x:5436,y:2004},{x:5328,y:1360},{x:5392,y:784},{x:6240,y:952},{x:6372,y:1048},{x:6536,y:1724},{x:6396,y:2224},{x:6140,y:2568}],area15:[{x:4508,y:3352},{x:4128,y:3272},{x:3804,y:2996},{x:3700,y:2644},{x:3692,y:2252},{x:3744,y:1828},{x:3772,y:1640},{x:3920,y:1636},{x:4256,y:1640},{x:4512,y:1692},{x:4808,y:1772},{x:5016,y:1856},{x:5148,y:1888},{x:5240,y:1892},{x:5372,y:2312},{x:5172,y:2284},{x:4908,y:2336},{x:4780,y:2436},{x:4704,y:2544},{x:4632,y:2776}],steppe01:[{x:156,y:2664},{x:280,y:3048},{x:584,y:3444},{x:740,y:3564},{x:1136,y:4048},{x:1604,y:4556},{x:1812,y:4648},{x:2096,y:4724},{x:2268,y:4716},{x:2672,y:5836},{x:712,y:5556},{x:8,y:4992}],steppe02:[{x:2792,y:5764},{x:3296,y:5500},{x:3632,y:5284},{x:3944,y:5164},{x:4328,y:5152},{x:4760,y:5292},{x:5112,y:5464},{x:5576,y:5596},{x:5936,y:5648},{x:6276,y:5644},{x:6368,y:6196},{x:3076,y:6200}],steppe03:[{x:6596,y:6192},{x:6512,y:5812},{x:6456,y:5464},{x:6456,y:4920},{x:7444,y:4656},{x:8052,y:4224},{x:8056,y:4224},{x:7856,y:3848},{x:8260,y:3384},{x:8444,y:2796},{x:8532,y:2336},{x:8120,y:1776},{x:8624,y:1660},{x:9048,y:1160},{x:9056,y:4640},{x:8972,y:6188}]},Z={area01:{x:162,y:741,width:2587,height:2830},area02:{x:765,y:2710,width:1793,height:2003},area10:{x:2563,y:599,width:1355,height:1699},area11:{x:2549,y:1989,width:1955,height:1804},area15:{x:3684,y:1633,width:1678,height:1726},area09:{x:3785,y:310,width:1556,height:1587},area03:{x:2420,y:3724,width:1338,height:2036},area04:{x:3645,y:3785,width:1323,height:1568},area12:{x:4359,y:2282,width:1606,height:1695},area05:{x:4939,y:3854,width:1345,height:1796},area14:{x:5337,y:790,width:1199,height:1965},area08:{x:5393,y:256,width:2418,height:1472},area13:{x:5789,y:1472,width:1638,height:2392},area07:{x:7298,y:1581,width:1247,height:2251},area06:{x:6119,y:3325,width:1933,height:1588},steppe01:{x:-1,y:2669,width:2883,height:3533},steppe02:{x:2803,y:5153,width:3566,height:1046},steppe03:{x:6458,y:1081,width:2611,height:5120}},Q={area01:{x:1568,y:1359},area02:{x:1095,y:940},area03:{x:650,y:797},area04:{x:697,y:747},area05:{x:620,y:868},area06:{x:793,y:930},area07:{x:470,y:1300},area08:{x:1508,y:1032},area09:{x:884,y:806},area10:{x:621,y:1247},area11:{x:660,y:1128},area12:{x:713,y:961},area13:{x:932,y:1324},area14:{x:603,y:945},area15:{x:550,y:860},steppe01:{x:901,y:2439},steppe02:{x:1514,y:600},steppe03:{x:2049,y:3504}},ee=["steppe01","steppe02","steppe03"],te=Object.keys(J),ne=n(29);n(217)((function(e){var t=NaN,n=NaN,a=NaN,r=NaN,i=!0,o=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value,p=u.x,d=u.y;(isNaN(t)||p<t)&&(t=p),(isNaN(a)||p>a)&&(a=p),(isNaN(n)||d<n)&&(n=d),(isNaN(r)||d>r)&&(r=d)}}catch(h){o=!0,s=h}finally{try{i||null==l.return||l.return()}finally{if(o)throw s}}return{x:t,y:n,width:a-t,height:r-n}}));function ae(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function re(){return Math.random()>.5}var ie=function(e){return new Promise((function(t){return setTimeout(t,e)}))},oe=function(e,t){switch(t){case"idSelector":return"#"+e;case"url":return"url(#"+e+")";default:return e}};function se(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw";return oe(e(t),n)}}function ce(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";return oe(e,t)}}se((function(e){return"fill-".concat(e)})),se((function(e){return"mask_".concat(e)})),ce("rootSvg"),se((function(e){return e})),se((function(e){return"borders_".concat(e)})),ce("vector_borders"),se((function(e){return"areas/mask/".concat(e,".png")}));var le=function(e){return ee.indexOf(e)>=0?0:parseInt(e.slice(-2))},ue=function(e){return 0===e?ee:[pe(e)]},pe=function(e){return 0===e?ee[0]:"area".concat(e.toString().padStart(2,"0"))},de=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).ref=r.a.createRef(),n.debouncedResize=void 0,n.recalculate=function(){var e,t,a,r,i;return q.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.ref.current){o.next=2;break}return o.abrupt("return");case 2:return e=n.getBodySizeSnapshot(),t=n.calcLimit(n.props.maxWidth),a=n.calcLimit(n.props.maxHeight),r=a/n.props.lines-1,n.setSize(r),n.ref.current.style.lineHeight=~~(n.calcLimit(n.props.maxHeight)/n.props.lines)+"px",o.next=10,q.a.awrap(ie(0));case 10:i=n.getDims();case 11:if(!(i.width>t||i.height>a)){o.next=22;break}return n.setSize(--r),o.next=15,q.a.awrap(ie(0));case 15:if(e===n.getBodySizeSnapshot()){o.next=19;break}return o.next=18,q.a.awrap(n.recalculate());case 18:return o.abrupt("return");case 19:i=n.getDims(),o.next=11;break;case 22:case"end":return o.stop()}}))},n.getBodySizeSnapshot=function(){return"".concat(document.body.clientWidth,", ").concat(document.body.clientHeight)},n.setSize=function(e){n.ref.current&&(n.ref.current.style.fontSize=e+"px")},n.getDims=function(){if(!n.ref.current)return{width:0,height:0};var e=n.ref.current;return{width:e.scrollWidth,height:e.scrollHeight}},n.calcLimit=function(e){switch(e.type){case"px":return e.value;case"vh":return document.body.clientHeight*e.value*.01;case"vw":return document.body.clientWidth*e.value*.01}return e.value},n.debouncedResize=$.debounce(n.recalculate,100),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.debouncedResize),this.recalculate()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedResize)}},{key:"componentDidUpdate",value:function(e,t,n){this.props.children!==e.children&&this.recalculate()}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.ref},this.props.children)}}]),t}(a.Component),he=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.main,a=e.secondary,i=e.msgAccented,o=void 0!==i&&i;return r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.padding},r.a.createElement("div",{className:t.mainRow},r.a.createElement("div",{className:t.title},r.a.createElement(de,{lines:1,maxWidth:{value:65,type:"vw"},maxHeight:{value:7,type:"vh"}},n||"")),r.a.createElement(G,{iconHref:"icons/menu_button.png",onClick:this.props.onMenuClick})),r.a.createElement("div",{className:K()(t.secondaryRow,{accented:o})},r.a.createElement(de,{lines:2,maxWidth:{value:100,type:"vw"},maxHeight:{value:7,type:"vh"}},a||""))),r.a.createElement("div",{className:t.stylizedTransition}))}}]),t}(a.Component),me=Object(j.a)((function(e){return Object(C.a)({wrapper:{color:"#"+b.activeTint.toString(16),backgroundColor:"#000000",height:e.pageSizes.top,width:e.pageSizes.viewport.width,position:"absolute",zIndex:100},padding:{paddingTop:"1vh",paddingLeft:"2vw",paddingRight:"2vw"},mainRow:{display:"flex",flexDirection:"row",fontSize:"7vh",paddingLeft:"2vw",justifyContent:"space-between"},secondaryRow:{fontSize:"3vh",textAlign:"center",verticalAlign:"middle",height:"6vh",width:"100vw",display:"table-cell","&.accented":{color:"#e7ea81"}},title:{whiteSpace:"nowrap",fontSize:"40px"},stylizedTransition:Object(h.a)({position:"absolute",zIndex:100,backgroundImage:"url(ui/crows_legs.png)"},N(e,x.UI.bottomTransitionHeightPx),{backgroundRepeat:"repeat-x",width:"100%",pointerEvents:"none",top:~~e.pageSizes.top-1})})}))(he),fe=n(73),ge=n(2),ve=[{name:"\u0410\u043d\u0434\u0440\u0435\u0439 \u0421\u0442\u0430\u043c\u0430\u0442\u0438\u043d",id:"andrei",closeFor:0,gender:1},{name:"\u041c\u0430\u0440\u0438\u044f \u041a\u0430\u0438\u043d\u0430",id:"maria",closeFor:0,gender:0},{name:"\u041c\u043b\u0430\u0434\u0448\u0438\u0439 \u0412\u043b\u0430\u0434",id:"vlad",closeFor:0,gender:1},{name:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0421\u0430\u0431\u0443\u0440\u043e\u0432",id:"alexandr",closeFor:1,gender:1},{name:"\u041e\u0441\u043f\u0438\u043d\u0430",id:"ospina",closeFor:1,gender:0},{name:"\u0420\u0443\u0431\u0438\u043d",id:"rubin",closeFor:1,gender:1},{name:"\u041a\u0430\u043f\u0435\u043b\u043b\u0430",id:"kapella",closeFor:2,gender:0},{name:"\u041d\u043e\u0442\u043a\u0438\u043d",id:"notkin",closeFor:2,gender:1},{name:"\u0421\u043f\u0438\u0447\u043a\u0430",id:"spichka",closeFor:2,gender:1}],ye=[{name:"\u0411\u0430\u043a\u0430\u043b\u0430\u0432\u0440",id:"bakalavr",closeFor:0,gender:1,isHealer:!0},{name:"\u0421\u0430\u043c\u043e\u0437\u0432\u0430\u043d\u043a\u0430",id:"samozvanka",closeFor:1,gender:0,isHealer:!0},{name:"\u0413\u0430\u0440\u0443\u0441\u043f\u0438\u043a",id:"garuspik",closeFor:2,gender:1,isHealer:!0}],be=ve.concat(ye);function xe(e){var t,n,a,r,i,o;return q.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t="map/tiles-".concat(e),n="".concat(t,"/index.json"),s.prev=2,s.next=5,q.a.awrap(fetch(n));case 5:return a=s.sent,s.next=8,q.a.awrap(a.json());case 8:return r=s.sent,i=r.scale,o=r.tiles,s.abrupt("return",{scale:i,tiles:o.map((function(e){return{x:e.x*i,y:e.y*i,tex:ge.Texture.from("".concat(t,"/").concat(e.name),{mipmap:!0})}}))});case 14:return s.prev=14,s.t0=s.catch(2),s.abrupt("return",{scale:1,tiles:[]});case 17:case"end":return s.stop()}}),null,null,[[2,14]])}function we(e){var t;return q.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.a.awrap(Se(e));case 2:return t=n.sent,n.abrupt("return",te.map((function(e){return{key:e,bbox:Z[e],overlay:{scale:t.scale,tiles:t.tiles[e]},mask:{scale:4,tex:ge.Texture.from("areas/mask/".concat(e,".png"))},hitArea:new ge.Polygon(J[e].map((function(e){var t=e.x,n=e.y;return new ge.Point(t,n)}))),tokenPosition:Q[e]}})));case 4:case"end":return n.stop()}}))}function Se(e){var t,n,a,r;return q.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t="areas/overlay/".concat(e,"/"),n="".concat(t,"/index.json"),a={},i.prev=3,i.next=6,q.a.awrap(function(){var e,r,i,o,s,c,l,u,p,d;return q.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,q.a.awrap(fetch(n));case 2:return e=h.sent,h.next=5,q.a.awrap(e.json());case 5:for(r=h.sent,i=r.scale,o=r.areas,s=!0,c=!1,l=void 0,h.prev=11,u=function(){var e=d.value;a[e.key]=e.tiles.map((function(n){return{tex:ge.Texture.from("".concat(t).concat(e.key,"/").concat(n.name),{mipmap:!0}),x:n.x*i,y:n.y*i}}))},p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)u();h.next=20;break;case 16:h.prev=16,h.t0=h.catch(11),c=!0,l=h.t0;case 20:h.prev=20,h.prev=21,s||null==p.return||p.return();case 23:if(h.prev=23,!c){h.next=26;break}throw l;case 26:return h.finish(23);case 27:return h.finish(20);case 28:return h.abrupt("return",{v:{scale:i,tiles:a}});case 29:case"end":return h.stop()}}),null,null,[[11,16,20,28],[21,,23,27]])}());case 6:if("object"!==typeof(r=i.sent)){i.next=9;break}return i.abrupt("return",r.v);case 9:i.next=14;break;case 11:return i.prev=11,i.t0=i.catch(3),i.abrupt("return",{scale:1,tiles:{}});case 14:case"end":return i.stop()}}),null,null,[[3,11]])}function ke(e){var t,n,a;return q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.awrap(fetch("ui/crowSprites/data.json").then((function(e){return e.json()})));case 2:return t=e.sent,n=ge.BaseTexture.from("ui/crowSprites/sheet.png"),a=t.sprites.map((function(e){var a=e.x,r=e.y;return new ge.Texture(n,new ge.Rectangle(a,r,t.width,t.height))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}))}function Oe(e){var t,n,a,r,i;return q.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:for(t={},n=new Promise((function(t){return e.onComplete.add(t)})),a=0,r=[].concat(Object(O.a)(ve),Object(O.a)(ye));a<r.length;a++)i=r[a],e.add("cards/".concat(i.id,".jpg")),t[i.id]=new ge.BaseTexture("cards/".concat(i.id,".jpg"),{alphaMode:ge.ALPHA_MODES.PREMULTIPLIED_ALPHA});return e.load(),o.next=6,q.a.awrap(n);case 6:return o.abrupt("return",t);case 7:case"end":return o.stop()}}))}var je={total:"[Textures] total",areas:"[Textures] > areas",map:"[Textures] > map",overlay:"[Textures] areas overlay"};function Ce(e,t){console.time(je[e]);var n=!1;try{var a=t();return a&&a.then?(n=!0,a.then((function(t){return console.timeEnd(je[e]),t}))):a}finally{n||console.timeEnd(je[e])}}var Ee=n(16),Te=Object(a.createContext)(null);function Pe(e){return function(t){var n=Object(a.useContext)(Te);return n?r.a.createElement(e,Object.assign({},t,{resources:n})):null}}for(var Ae=null,Me=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={resources:Ae},n.load=function(e){(function(e,t){var n,a,r,i,o,s,c;return q.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return console.group("loading ".concat(t," preset...")),l.next=3,q.a.awrap(Ce("total",(function(){return Promise.all([Ce("map",(function(){return xe("low")})),Ce("areas",(function(){return we(t)})),ke(e.loader),Oe(e.loader)])})).catch((function(e){throw console.groupEnd(),e})));case 3:return n=l.sent,a=Object(fe.a)(n,4),r=a[0],i=a[1],o=a[2],s=a[3],c={mapTiles:r,areas:i,crows:o,characterCards:s,whiteHand:ge.Texture.from("icons/hand_white.svg"),redHand:ge.Texture.from("icons/hand_red.svg"),siegeToken:ge.Texture.from("icons/siege.png"),cloudTex:ge.Texture.from("cards/cloud_tex.png"),cardMaskTex:ge.Texture.from("cards/card_mask.png"),missionCards:[ge.Texture.from("cards/missions/12.jpg")],sizes:{hand:340,siegeToken:437}},console.log("loaded data:",c),console.groupEnd(),l.abrupt("return",c);case 13:case"end":return l.stop()}}))})(n.props.app,e).then((function(e){Ae=e,n.setState({resources:e}),n.props.onLoaded(e)}))},n.render=function(){return n.props.children(n.state.resources)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.state.resources?this.props.onLoaded(this.state.resources):this.load(this.props.qualityPreset),window.setQ=this.load}}]),t}(r.a.Component),ze=Object(Ee.withPixiApp)(Me),He=n(94),Ne={turnNo:["\u0425\u0456\u0434 {{turn}}",["turn"]],cannotEndSiegeOnSameTurn:["\u041d\u0435\u043c\u043e\u0436\u043e\u043b\u0438\u0432\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u0442\u0438 \u043e\u0431\u043b\u043e\u0433\u0443 \u043d\u0430 \u0442\u043e\u043c\u0443 \u0436 \u0445\u043e\u0434\u0456, \u043d\u0430 \u044f\u043a\u043e\u043c\u0443 \u0432\u043e\u043d\u0430 \u043f\u043e\u0447\u0430\u0442\u0430!"],cannotEndSiege:["\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u0437\u0430\u043a\u0456\u043d\u0447\u0438\u0442\u0438 \u043e\u0431\u043b\u043e\u0433\u0443"],cannotStartSiegeCauseMovements:["\u041d\u0435\u043c\u043e\u0436\u043e\u043b\u0438\u0432\u043e \u043f\u043e\u0447\u0430\u0442\u0438 \u043e\u0431\u043b\u043e\u0433\u0443 \u043d\u0430 \u0445\u043e\u0434\u0456 \u0437 \u043f\u0435\u0440\u0435\u043c\u0456\u0449\u0435\u043d\u043d\u044f\u043c"],cannotStartSiegeCauseContamination:["\u041d\u0435\u043c\u043e\u0436\u043e\u043b\u0438\u0432\u043e \u043f\u043e\u0447\u0430\u0442\u0438 \u043e\u0431\u043b\u043e\u0433\u0443 \u043d\u0430 \u0445\u043e\u0434\u0456 \u0437 \u0437\u0430\u0440\u0430\u0436\u0435\u043d\u043d\u044f\u043c"],cannotStartSiegeCauseSiege:["\u041d\u0435\u043c\u043e\u0436\u043e\u043b\u0438\u0432\u043e \u043f\u043e\u0447\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u043e\u0431\u043b\u043e\u0433\u0443 \u043d\u0430 \u0445\u043e\u0434\u0456 \u0437 \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f\u043c \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u044c\u043e\u0457"],siegeEndSuccessfully:["\u041e\u0431\u043b\u043e\u0433\u0443 \u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043e"],siegeCancelledCauseMovement:["\u041e\u0431\u043b\u043e\u0433\u0443 \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u043f\u0435\u0440\u0435\u043c\u0456\u0449\u0435\u043d\u043d\u044f"],startOfTurn:["\u041f\u043e\u0447\u0430\u0442\u043e\u043a \u0445\u043e\u0434\u0443"],movementToLocation:["\u0420\u0443\u0445 \u0434\u043e {{locationNo, if-not:0}}\xab{{location}}\xbb",["locationNo","location"]],startingLocation:["\u041f\u043e\u0447\u0430\u0442\u043e\u043a \u0432 {{locationNo, if-not:0}}\xab{{location}}\xbb",["locationNo","location"]],selectCharacter:["\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u041d\u0430\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u0445, \u044f\u043a\u0456 \u0431\u0443\u043b\u0438 \u0443\u0440\u0430\u0436\u0435\u043d\u0456"],siegeStarted:["\u041f\u043e\u0447\u0430\u0442\u043e\u043a \u043e\u0431\u043b\u043e\u0433\u0438"],siegeStartedKilled:["\u041f\u043e\u0447\u0430\u0442\u043e\u043a \u043e\u0431\u043b\u043e\u0433\u0438: {{killed}}",["killed"]],siegeEndedKilled:["\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f \u043e\u0431\u043b\u043e\u0433\u0438: {{killed}}",["killed"]],multipleCharacterKilled:["{{characters}} \u0443\u0440\u0430\u0436\u0435\u043d\u0456",["characters"]],characterWoKilled:["{{char}} \u0443\u0440\u0430\u0436\u0435\u043d\u0430",["char"]],characterMaKilled:["{{char}} \u0443\u0440\u0430\u0436\u0435\u043d\u0438\u0439",["char"]],cannotContaminateTwice:["\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u043f\u043e\u0447\u0430\u0442\u0438 \u0437\u0430\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043a\u0456\u043b\u044c\u043a\u0430 \u0440\u0430\u0437\u0456\u0432 \u0437\u0430 \u0445\u0456\u0434"],cannotContaminateCauseSiege:["\u041d\u0435\u043c\u043e\u0436\u043b\u0438\u0432\u043e \u043f\u043e\u0447\u0430\u0442\u0438 \u0437\u0430\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u043d\u0430 \u0445\u043e\u0434\u0456 \u0437 \u043e\u0431\u043b\u043e\u0433\u043e\u044e"],confirmTurnEnd:["\u0417\u0430\u043a\u0456\u043d\u0447\u0438\u0442\u0438 \u0445\u0456\u0434?"],turnEnd:["\u0417\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f \u0445\u043e\u0434\u0443"],phase:["\u0424\u0430\u0437\u0430 {{phase}}",["phase"]],additionalMove:["\u0414\u043e\u0434\u0430\u0442\u043a. \u043a\u0440\u043e\u043a"],startOfGame:["\u041f\u043e\u0447\u0430\u0442\u043e\u043a \u0433\u0440\u0438"],selectAreaToStartFrom:["\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u043e\u0447\u0430\u0442\u043a\u043e\u0432\u0443 \u043b\u043e\u043a\u0430\u0446\u0456\u044e \u0427\u0443\u043c\u0438"],healersTurn:["\u0425\u0456\u0434 \u043b\u0456\u043a\u0430\u0440\u0456\u0432"],selectHealersEffects:["\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0435\u0444\u0435\u043a\u0442\u0438"],canceledEffect:["\xab{{effect}}\xbb \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",["effect"]],activatedEffect:["\xab{{effect}}\xbb \u0430\u043a\u0442\u0438\u0432\u043e\u0432\u0430\u043d\u043e",["effect"]],cancelSiegeWarning:["\u0426\u044f \u0434\u0456\u044f \u0441\u043a\u0430\u0441\u0443\u0454 \u041e\u0431\u043b\u043e\u0433\u0443"],doubleMovement:["\u041f\u043e\u0434\u0432\u0456\u0439\u043d\u0435 \u043f\u0435\u0440\u0435\u043c\u0456\u0449\u0435\u043d\u043d\u044f"],finishTurn:["\u0417\u0430\u043a\u0456\u043d\u0447\u0438\u0442\u0438 \u0445\u0456\u0434"],contaminate:["\u0417\u0430\u0440\u0430\u0436\u0435\u043d\u043d\u044f"],contaminateOfLocation:["\u0417\u0430\u0440\u0430\u0436\u0435\u043d\u043d\u044f {{locationNo, if-not:0}}\xab{{location}}\xbb",["locationNo","location"]],startSiege:["\u041f\u043e\u0447\u0430\u0442\u0438 \u041e\u0431\u043e\u0433\u0443"],finishSiege:["\u0417\u0430\u043a\u0456\u043d\u0447\u0438\u0442\u0438 \u041e\u0431\u043b\u043e\u0433\u0443"],cancelAction:["\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438 \u0434\u0456\u044e"],cancelSpecificAction:["\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438 \xab{{action}}\xbb",["action"]],close:["\u0417\u0430\u043a\u0440\u0438\u0442\u0438"],apply:["\u0417\u0430\u0441\u0442\u043e\u0441\u0443\u0432\u0430\u0442\u0438"],disable:["\u0412\u0438\u043c\u043a\u043d\u0443\u0442\u0438"],missions:["\u041c\u0456\u0441\u0456\u0457"],stamms:["\u0428\u0442\u0430\u043c\u0438"],effectm12:["\u0412\u0435\u0440\u0445\u043e\u043c \u043d\u0430 \u043a\u0440\u044b\u0441\u0430\u0445"],effectsPlusMovement:["\u0428\u0442\u0430\u043c\u043c \u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435"],selectLocation:["\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0456\u044e"],restoringGameState:["\u0412\u0456\u0434\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u043d\u0443"],startNew:["\u041f\u043e\u0447\u0430\u0442\u0438 \u043d\u043e\u0432\u0443 \u0433\u0440\u0443"],restoreLastGame:["\u0412\u0456\u0434\u043d\u043e\u0432\u0438\u0442\u0438 \u043e\u0441\u0442\u0430\u043d\u043d\u044e \u0433\u0440\u0443"],saveGameReplay:["\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043f\u0438\u0441"],returnToGame:["\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044c \u0434\u043e \u0433\u0440\u0438"],loading:["\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."]},Ie={},Le=0,Re=Object.keys(Ne);Le<Re.length;Le++){var Fe=Re[Le];Ie[Fe]=Ne[Fe][0]}He.a.init({lng:"ua",interpolation:{format:function(e,t,n){if(t&&t.startsWith("if-not:")){var a=JSON.parse(t.substring(7));return e instanceof Array?a.some((function(t){return t.toString()===e.toString()}))?"":e+" ":e.toString()===a.toString()?"":e+" "}return e}},resources:{ua:{translation:Ie}}});var De=function(e){return function(t){return He.a.t(e,t)}};var We=function(){for(var e={},t=0,n=Object.keys(Ne);t<n.length;t++){var a=n[t];e[a]=De(a)}return e}(),Be=function(){return r.a.createElement("div",{style:{width:"100vw",height:"100vh",color:"white",backgroundColor:"black",fontSize:"75px",paddingTop:"200px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2vh"}},r.a.createElement("img",{src:"icons/menu_button.png",id:"loading"})),r.a.createElement("div",null,We.loading()))},Ue=n(125),_e=localStorage.getItem("debug"),Ge=_e?new Ue.a:{},Ve=function(e){return _e?e(Ge):{}};Ve((function(){Ge.domElement.parentElement.style.zIndex="9999999999","false"==localStorage.getItem("debug_show")&&Ge.hide(),setInterval((function(){localStorage.setItem("debug_show",("none"!==Ge.domElement.style.display).toString())}),250)})),Ve((function(){return window.PIXI=ge}));var Ke=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={resources:null},n.render=function(){var e=n.props,t=e.qualityPreset,a=e.children,i=e.size,o=e.pageSizes;return r.a.createElement("div",{style:{height:i.height,width:i.width,maxHeight:i.height,top:o.top,position:"absolute",backgroundColor:"black"}},n.renderLoader(),r.a.createElement(Ee.Stage,{width:i.width,height:i.height,options:{transparent:!0},onUnmount:function(){return console.log("stage is killed")}},r.a.createElement(ze,{onLoaded:n.onResourcesLoaded,qualityPreset:t},(function(e){return e?r.a.createElement(Te.Provider,{value:e},a):null}))))},n.renderLoader=function(){return n.state.resources?null:r.a.createElement(Be,null)},n.onResourcesLoaded=function(e){return n.setState({resources:e})},n}return Object(p.a)(t,e),t}(r.a.Component),Xe=Object(Ee.PixiComponent)("RawObj",{create:function(e){return e.assign&&Object.assign(e.obj,e.assign),e.obj}}),qe=n(126),$e=function(){function e(t){var n=this;Object(s.a)(this,e),this.onTick=t,this.startTime=0,this.lastTick=0,this.elapsedTotal=0,this.rafHandle=0,this.isStopped=!0,this.tick=function(e){if(!n.isStopped){0===n.lastTick&&(n.lastTick=e);var t=e-n.lastTick;n.elapsedTotal+=t,n.lastTick=e,n.onTick({elapsed:t,elapsedTotal:n.elapsedTotal,timestamp:e})&&requestAnimationFrame(n.tick)}}}return Object(c.a)(e,[{key:"start",value:function(){this.isStopped=!1,this.startTime=Date.now(),this.elapsedTotal=0,this.lastTick=0,requestAnimationFrame(this.tick)}},{key:"stop",value:function(){this.isStopped=!0,this.rafHandle&&cancelAnimationFrame(this.rafHandle)}}]),e}(),Ye=Object.fromEntries(te.map((function(e){return[e,"disabled"]})));Ve((function(e){var t=e.addFolder("Area fills");Object.keys(Ye).forEach((function(e){t.add(Ye,e).listen()}))}));var Je=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).container=void 0,n.rect=void 0,n.emitter=void 0,n.ticker=void 0,n.fadingMod=1,n.maxAlpha=1,n.minAlpha=0,n.skipDelay=!1,n.getLifetime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=.001*(v.fillTime+v.fillTime*v.fadingStart),n=v.particlesTtlSpread*t;return{min:t*e,max:(t+n)*e}},n.transitToFill=function(e,t){if(e!==t&&"active"===t){var a=n.getLifetime(.3);n.emitter.minLifetime=a.min,n.emitter.maxLifetime=a.max,n.emitter.emit=!0,n.emitter.update(.001*v.fillTime),n.emitter.emit=!1}else{var r=n.getLifetime();n.emitter.minLifetime=r.min,n.emitter.maxLifetime=r.max}switch(e){case"disabled":case"available":n.goToDisabled();break;case"passed":case"passed-available":n.goToPassed();break;case"active":n.goToActive()}Ve((function(){return Ye[n.props.areaKey]="".concat(t," > ").concat(e)}))},n.goToPassed=function(){n.rect.tint=b.passedTint,n.skipDelay=!0,n.rect.alpha>.65?(n.minAlpha=.65,n.maxAlpha=1,n.fadingMod=-1):(n.maxAlpha=.5,n.minAlpha=0,n.fadingMod=1),n.ticker.start()},n.goToDisabled=function(){n.emitter.emit=!1,n.skipDelay=!0,n.fadingMod=-1,n.minAlpha=0,n.ticker.start()},n.goToActive=function(){n.rect.tint=b.activeTint,n.ticker.start(),n.emitter.emit=!0,n.skipDelay=!1,n.fadingMod=1,n.maxAlpha=1},n.rafTick=function(e){return n.updateRect(e),n.emitter.update(.001*e.elapsed),e.elapsedTotal>v.fillTime&&(n.emitter.emit=!1),!0},n.updateRect=function(e){(n.skipDelay||e.elapsedTotal>=v.fillTime*v.fadingStart)&&(n.rect.alpha+=v.fadingDelta*n.fadingMod*e.elapsed,n.rect.alpha>n.maxAlpha&&(n.rect.alpha=n.maxAlpha),n.rect.alpha<n.minAlpha&&(n.rect.alpha=n.minAlpha),n.rect.alpha===n.maxAlpha&&n.fadingMod>=0&&0===n.emitter.particleCount&&n.ticker.stop())},n.render=function(){return r.a.createElement(Xe,{obj:n.container})};var a=e.bbox,i=e.sizeMult;return n.container=new ge.Container,n.container.x=0,n.container.y=0,n.rect=new ge.Sprite(ge.Texture.WHITE),n.rect.tint=b.activeTint,Object.assign(n.rect,{width:e.bbox.width,height:e.bbox.height}),n.rect.alpha=0,n.container.addChild(n.rect),n.emitter=n.createEmitter(a,i),n.ticker=new $e(n.rafTick),n.transitToFill(e.fill,e.fill),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"createEmitter",value:function(e,t){return new qe.a(this.container,[this.props.resources.redHand],{scale:{start:2,end:2},speed:{start:1,end:1,minimumSpeedMultiplier:1},startRotation:{min:0,max:360},noRotation:!1,lifetime:this.getLifetime(),spawnType:"rect",spawnRect:{x:0,y:0,w:e.width,h:e.height},pos:{x:0,y:0},frequency:v.fillTime/(v.particlesCount*t)*.001,maxParticles:v.particlesCount*t})}},{key:"shouldComponentUpdate",value:function(e,t,n){return e!==this.props&&(e.fill!==this.props.fill&&this.transitToFill(e.fill,this.props.fill),!0)}},{key:"componentWillUnmount",value:function(){this.ticker.stop()}}]),t}(r.a.Component),Ze=Object(Ee.withPixiApp)(Je),Qe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).container=null,n.targetAlpha=0,n.tick=function(){var e=n.container;if(e&&e.alpha!==n.targetAlpha){var t=n.props.app.ticker.elapsedMS;e.alpha<n.targetAlpha?(e.alpha+=y.fadingDelta*t,e.alpha>1&&(e.alpha=1)):e.alpha>n.targetAlpha&&(e.alpha-=y.fadingDelta*t,e.alpha<0&&(e.alpha=0,e.visible=!1))}},n.render=function(){var e=n.props.area,t="area_overlay_".concat(e.key);return r.a.createElement(Ee.Container,{name:t,ref:function(e){return n.container=e}},e.overlay.tiles.map((function(n,a){var i=n.tex,o=n.x,s=n.y,c="".concat(t,"_").concat(a);return r.a.createElement(Ee.Sprite,{scale:e.overlay.scale,texture:i,x:o,y:s,key:c,name:c})})))},n.props.app.ticker.add(n.tick),n.targetAlpha=e.visible?1:0,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,n){return this.targetAlpha=e.visible?1:0,e.visible&&this.container&&(this.container.visible=!0),!1}}]),t}(r.a.Component),et=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).sprite=null,n.animState=0,n.render=function(){var e=n.props,t=e.resources,a=e.area;return r.a.createElement(Ee.Sprite,{ref:function(e){return n.sprite=e},texture:t.siegeToken,alpha:0,zIndex:10,anchor:.5,x:a.tokenPosition.x,y:a.tokenPosition.y})},n.tick=function(){var e=n.props.app.ticker.elapsedMS;if(n.sprite){if(0!==n.animState){var t=e*w.deltaAlpha,a=e*w.deltaScale;if(1===n.animState){n.sprite.alpha+=t;var r=n.sprite.scale.x-a;r<=w.toScale||n.sprite.alpha>=1?(n.sprite.alpha=1,n.sprite.scale.set(w.toScale),n.animState=0):n.sprite.scale.set(r)}}}else n.props.app.ticker.remove(n.tick)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.sprite.alpha=0,this.sprite.scale=new ge.Point(w.fromScale),this.animState=1,this.props.app.ticker.add(this.tick)}},{key:"componentWillUnmount",value:function(){this.animState=-1}}]),t}(r.a.Component),tt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).maskSprite=void 0,n.render=function(){var e=n.props,t=e.area,a=e.fill,i=e.resources,o=t.bbox,s=t.key;return r.a.createElement(Ee.Container,o,r.a.createElement(Qe,{area:t,visible:"disabled"===a||"passed"===a,app:n.props.app}),r.a.createElement(Ee.Container,{mask:n.maskSprite,name:"area_sprite_container_"+t.key},r.a.createElement(Xe,{obj:n.maskSprite,ref:n.props.pixiRef}),r.a.createElement(Ze,{fill:a,bbox:o,areaKey:s,resources:i,sizeMult:n.getSizeMult(t.key)})),n.renderToken())},n.renderToken=function(){var e=n.props,t=e.area,a=e.resources;if(n.props.tokens.some((function(e){return"siege"==e})))return r.a.createElement(et,{area:t,resources:a,app:n.props.app})},n.maskSprite=ge.Sprite.from(e.area.mask.tex),n.maskSprite.scale=new ge.Point(e.area.mask.scale,e.area.mask.scale),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getSizeMult",value:function(e){switch(e){case"area13":return 1.7;case"area01":case"steppe01":return 2;case"steppe03":return 3;default:return 1}}}]),t}(r.a.Component),nt=Object(Ee.withPixiApp)(tt),at=n(127),rt={centerX:0,centerY:0,cornerX:0,cornerY:0,screenH:0,screenW:0,target:""},it=Ve((function(e){var t=e.addFolder("viewport");return t.open(),t}));function ot(e){Ve((function(){var t=0;Object.keys(rt).map((function(n){var a=it.add(rt,n);return a.domElement.querySelector("input").addEventListener("focus",(function(){return t++})),a.domElement.querySelector("input").addEventListener("focusout",(function(){return t--})),a.onChange((function(t){return function(t,n){switch(t){case"centerX":e.moveCenter(n,e.center.y);break;case"centerY":e.moveCenter(e.center.x,n)}}(n,t)}))})),setInterval((function(){window.changing=t,t||(Object.assign(rt,{centerX:e.center.x,centerY:e.center.y,cornerX:e.corner.x,cornerY:e.corner.y,screenH:e.worldScreenHeight,screenW:e.worldScreenWidth}),it.updateDisplay())}),100)}))}var st=Object(Ee.PixiComponent)("Viewport",{create:function(e){var t=new at.a({worldWidth:x.worldWidth,worldHeight:x.worldHeight,screenHeight:e.screenHeight,screenWidth:e.screenWidth,ticker:e.app.ticker,interaction:e.app.renderer.plugins.interaction});return ot(t),t.on("clicked",e.onClick),t.drag({factor:1}).pinch().wheel().bounce({time:300,sides:"horizontal"}).decelerate({friction:.8}),lt(t,e),ct(t,e.focusOn),t.setZoom(.2),Ve((function(){return window.viewport=t})),t},applyProps:function(e,t,n){e.screenHeight=n.screenHeight,e.screenWidth=n.screenWidth,e.clamp({direction:"y"}),Ve((function(){var e,t;return Object.assign(rt,{target:"".concat(null===(e=n.focusOn)||void 0===e?void 0:e.x," ").concat(null===(t=n.focusOn)||void 0===t?void 0:t.y)})})),n.focusOn!==t.focusOn&&ct(e,n.focusOn),lt(e,n)}});function ct(e,t){if(t){var n=t.x-e.worldScreenWidth/2,a=e.corner.x<0?e.corner.x:0;n<a&&(n=a);var r=n+e.worldScreenWidth-e.worldWidth+a;r>0&&(n-=r);var i=t.y-e.worldScreenHeight/2;i<0&&(i=0),e.moveCorner(n,i)}}function lt(e,t){var n=(t.screenWidth,t.screenHeight,{maxHeight:x.worldHeight,minHeight:x.worldHeight/5});e.clampZoom(n)}var ut=function(e){return r.a.createElement(st,Object.assign({app:Object(Ee.useApp)()},e,{children:e.children}))},pt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).render=function(){var e=n.props.mapTiles;return r.a.createElement(Ee.ParticleContainer,null,e.tiles.map((function(t,n){var a=t.tex,i=t.x,o=t.y;return r.a.createElement(Ee.Sprite,{name:"map_tile_"+n,scale:e.scale,key:n,texture:a,x:i,y:o})})))},n}return Object(p.a)(t,e),t}(r.a.Component),dt={tokens:[],fills:Object.fromEntries(te.map((function(e){return[e,"disabled"]})))},ht=Object(h.a)({},dt.fills,{focusArea:""}),mt=Ve((function(e){var t=e.addFolder("MapView");return Object.keys(ht).forEach((function(e){t.add(ht,e).listen()})),t})),ft=Pe(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).grayscaleFilter=void 0,n.sprites={},n.render=function(){var e,t=n.props,a=t.resources,i=t.size,o=i.width,s=i.height;return Ve((function(){var e,t;return Object.assign(ht,null===(e=n.props.mapSnapshot)||void 0===e?void 0:e.fills,{focusArea:null===(t=n.props.mapSnapshot)||void 0===t?void 0:t.focusOn})})),r.a.createElement(ut,{onClick:n.onClick,screenWidth:o,screenHeight:s,focusOn:n.getFocusOn()},r.a.createElement(Ee.Container,{filters:(null===(e=n.props.mapSnapshot)||void 0===e?void 0:e.grayscale)?[n.grayscaleFilter]:[]},n.renderMap(a),n.renderAreas(a)))},n.getFocusOn=function(){if(n.props.mapSnapshot&&n.props.mapSnapshot.focusOn){var e=n.props.mapSnapshot.focusOn,t=n.props.resources.areas.find((function(t){return t.key===e})).bbox;switch(e){case"steppe01":return{x:t.x,y:t.y+t.height};case"steppe02":return{x:t.x+t.width/2,y:t.y+t.height};case"steppe03":return{x:t.x+t.width,y:t.y+t.height};default:return{x:t.x+t.width/2,y:t.y+t.height/2}}}},n.renderMap=function(e){return r.a.createElement(pt,{mapTiles:e.mapTiles})},n.renderAreas=function(e){var t=n.props.mapSnapshot||dt,a=t.fills,i=t.tokens;return e.areas.map((function(t){return r.a.createElement(nt,{resources:e,area:t,pixiRef:function(e){return n.sprites[t.key]=e},key:t.key,fill:a[t.key],tokens:i.filter((function(e){return e.areaKey===t.key})).map((function(e){return e.token}))})}))},n.onClick=function(e){var t,a,r=n.traceArea(e.world);r&&(null===(t=(a=n.props).onAreaClick)||void 0===t||t.call(a,r))},n.traceArea=function(e){var t=n.props.resources;if(!t)return null;var a=t.areas.find((function(t){return t.hitArea.contains(e.x,e.y)}));return a&&a.key||null},n.grayscaleFilter=new ge.filters.ColorMatrixFilter,n.grayscaleFilter.desaturate(),Ve((function(){var e={areaToFocus:"area01",setArea:function(){n.props.mapSnapshot.focusOn=e.areaToFocus,n.forceUpdate()}};mt.add(e,"areaToFocus",te).onChange((function(t){e.areaToFocus=t,e.setArea()})),mt.add(e,"setArea")})),n}return Object(p.a)(t,e),t}(r.a.Component)),gt=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.buttons,a=e.onMapButtons;return r.a.createElement("div",{className:t.wrapper,style:{bottom:0}},r.a.createElement("div",{className:t.padding},r.a.createElement("div",{className:t.buttonsWrapper},n?n():null)),r.a.createElement("div",{className:t.stylizedTransition}),r.a.createElement("div",{className:t.undoContainer},a?a():null))}}]),t}(a.Component),vt=Object(j.a)((function(e){return Object(C.a)({wrapper:{color:"#"+b.activeTint.toString(16),backgroundColor:"#000000",height:e.pageSizes.bottom,width:e.pageSizes.viewport.width,position:"absolute"},padding:{padding:x.UI.panelPaddingPx},buttonsWrapper:{display:"flex",justifyContent:"space-around",paddingLeft:"10vw",paddingRight:"10vw"},stylizedTransition:Object(h.a)({position:"absolute",backgroundImage:"url(ui/crows_wings.png)"},N(e,x.UI.bottomTransitionHeightPx),{bottom:~~e.pageSizes.bottom-2,width:"100%",pointerEvents:"none"}),undoContainer:{position:"absolute",bottom:~~(e.pageSizes.bottom+.04*e.pageSizes.viewport.height),right:"10vw"}})}))(gt),yt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderOnMapTopButtons=function(e){return n.props.onMapTopButtons?r.a.createElement("div",{style:{position:"absolute",right:"10vw",zIndex:200,top:~~(.04*e.viewport.height+e.top)}},n.props.onMapTopButtons()):null},n.renderTopPanel=function(){return r.a.createElement(me,{main:n.props.mainMsg,onMenuClick:n.props.onMenuClick,msgAccented:n.props.msgAccented,secondary:n.props.msg})},n.renderStage=function(e,t){var a=e.pageSizes,i={width:a.viewport.width,height:a.middle};return r.a.createElement(Ke,{key:"pixiStage",size:i,pageSizes:a,qualityPreset:"med"},r.a.createElement(ft,{size:i,mapSnapshot:n.props.mapSnapshot,onAreaClick:n.props.onAreaClick}),t.renderPixiBackdrop())},n.renderBottomPanel=function(e){return r.a.createElement(vt,{pageSizes:e,buttons:n.props.bottomButtons,onMapButtons:n.props.onMapBottomButtons})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(z,null,(function(t){return r.a.createElement(A,{controller:e.props.modalController,pageSizes:t.pageSizes},(function(n){var a,i;return r.a.createElement(r.a.Fragment,null,e.renderTopPanel(),e.renderStage(t,n),n.renderModal(),e.renderBottomPanel(t.pageSizes),e.renderOnMapTopButtons(t.pageSizes),(null===(a=(i=e.props).customComponent)||void 0===a?void 0:a.call(i,t.pageSizes))||void 0)}))}))}}]),t}(a.Component),bt=function(){function e(t,n){var a=this;Object(s.a)(this,e),this.props=t,this.promise=void 0,this.promise=n.then((function(){return a}))}return Object(c.a)(e,[{key:"renderProps",value:function(){return this.props}}]),e}(),xt=function(){function e(t,n){var a=this;Object(s.a)(this,e),this.routeProps=t,this.state=n,this.update=function(){return a.routeProps.update()}}return Object(c.a)(e,[{key:"setState",value:function(e){for(var t=!1,n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],i=e[r];this.state[r]!==i&&(this.state[r]=i,t=!0)}t&&this.routeProps.update()}}]),e}(),wt=n(134),St=function(){function e(){var t=this;Object(s.a)(this,e),this.dbPromise=void 0,this.writeAll=function(e){t.dbPromise.then((function(t){var n,a,r,i;return q.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.transaction("actions","readwrite"),a=n.objectStore("actions"),o.next=4,q.a.awrap(a.clear());case 4:r=0;case 5:if(!(r<e.length)){o.next=12;break}return i=e[r],o.next=9,q.a.awrap(a.put(i,r));case 9:r++,o.next=5;break;case 12:case"end":return o.stop()}}))}))},this.getAll=function(){return t.dbPromise.then((function(e){var t,n,a;return q.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.transaction("actions","readonly"),n=t.objectStore("actions"),r.next=4,q.a.awrap(n.count());case 4:if(0!==r.sent){r.next=7;break}return r.abrupt("return",null);case 7:return r.next=9,q.a.awrap(n.getAll());case 9:return a=r.sent,r.abrupt("return",a||null);case 11:case"end":return r.stop()}}))}))},this.dbPromise=this.open()}return Object(c.a)(e,[{key:"open",value:function(){return wt.a("pathologic-companion-db",1,{upgrade:function(e){e.createObjectStore("actions")}})}}]),e}(),kt=new St,Ot=n(72),jt=new function e(){var t=this;Object(s.a)(this,e),this.cardRealign=.6,this.destruction=1,this.birdsFlyOff=1.2,this.destructionTotal=this.cardRealign+this.destruction,this.mod=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return"".concat(n,"=").concat(t[e])}},Ct=Object(C.a)({sliderIndicator:{position:"relative",height:"3.5vh",width:"3.5vh",maxHeight:"3.5vh",maxWidth:"3.5vh",transition:"0.3s linear all","&.active":{transform:"scale(1.5)",filter:"brightness(300%)"}},label:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none",color:"white",fontWeight:900,fontSize:"2vh","&.healer":{color:"black",background:"#ffffff88"}}}),Et=Object(j.a)(Ct)((function(e){return r.a.createElement("div",{onClick:e.onClick,className:K()(e.classes.sliderIndicator,{active:e.isActive})},e.children,e.num?r.a.createElement("span",{className:K()(e.classes.label,{healer:e.isHealer})},e.num):null)})),Tt=Object(C.a)({titleRow:{paddingLeft:"1vw",paddingRight:"1vw",minHeight:"5vh",width:"100%",color:"#ffffff",fontSize:"3.8vh",textAlign:"center",overflow:"hidden",whiteSpace:"nowrap"}}),Pt=Object(j.a)(Tt)((function(e){var t=e.classes,n=e.text;return r.a.createElement("div",{className:t.titleRow},n||"")}));function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Mt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zt=function(e){var t=e.svgRef,n=e.title,a=Mt(e,["svgRef","title"]);return r.a.createElement("svg",At({width:340,height:340,id:"svg2",ref:t},a),n?r.a.createElement("title",null,n):null,r.a.createElement("path",{d:"m 206.99469,338.81531 c 0,-0.55 -1.38142,-1 -3.06982,-1 -1.73405,0 -4.88875,-1.2427 -7.25,-2.85593 -2.2991,-1.57076 -5.86768,-3.16616 -7.93018,-3.54532 -2.0625,-0.37916 -3.75,-1.01283 -3.75,-1.40816 0,-1.21628 -8.23559,-4.36224 -10.12568,-3.86797 -0.97975,0.25621 -2.58978,-0.14726 -3.57784,-0.89659 -2.61702,-1.98471 -3.29648,-1.74129 -3.29648,1.18096 0,2.1246 -0.32382,2.45718 -1.75,1.79739 -0.9625,-0.44528 -5.36966,-0.83092 -9.79368,-0.85699 -5.89492,-0.0347 -8.75264,-0.51186 -10.6976,-1.78611 -3.39226,-2.22244 -5.54449,-1.37184 -6.56686,2.59535 -0.55895,2.16894 -1.50095,3.24396 -3.03872,3.46787 -1.98345,0.2888 -2.15254,0.0138 -1.53692,-2.5 0.38045,-1.55347 1.18274,-3.14423 1.78288,-3.53501 1.55228,-1.01078 -2.12263,-3.57324 -6.30918,-4.39929 -2.56653,-0.5064 -3.70696,-0.26683 -4.61024,0.96848 -1.619,2.21411 -2.53058,2.0767 -5.69625,-0.85868 -1.48288,-1.375 -3.16578,-2.5 -3.73979,-2.5 -0.574,0 -1.04364,-0.45 -1.04364,-1 0,-0.55 -0.83115,-1 -1.84699,-1 -1.01584,0 -2.8847,-0.9 -4.15301,-2 -1.84101,-1.5967 -1.97269,-2 -0.65301,-2 1.95797,0 2.15768,-1.3576 0.40301,-2.73967 -2.00815,-1.5817 -6.75,-2.43901 -6.75,-1.22037 0,0.59294 0.45,0.79996 1,0.46004 0.55,-0.33992 1,0.0835 1,0.94099 0,0.85745 -0.2906,1.55901 -0.64578,1.55901 -0.35519,0 -5.08019,-4.478 -10.500004,-9.95114 -9.531526,-9.62527 -9.854216,-10.09815 -9.854216,-14.44098 0,-2.46942 0.45,-4.76796 1,-5.10788 1.842018,-1.13843 1.025739,-4.00644 -1.711294,-6.01265 -6.787366,-4.97506 -8.281932,-7.00645 -9.964315,-13.5433 -2.293432,-8.91106 -1.76182,-9.90659 5.394224,-10.10158 6.824922,-0.18597 7.146851,-0.16392 9.912138,0.67896 1.389283,0.42346 2.607232,0.0757 3.5,-0.99942 0.753086,-0.90689 2.831747,-3.23398 4.619247,-5.1713 1.7875,-1.93732 3.25,-4.15878 3.25,-4.93656 0,-0.77778 0.36368,-1.41415 0.80817,-1.41415 0.4445,0 2.132,-1.82983 3.75,-4.0663 1.61801,-2.23646 3.40888,-4.59896 3.97971,-5.25 0.57084,-0.65103 1.8743,-3.4337 2.89657,-6.1837 1.02227,-2.75 2.48192,-5.675 3.24365,-6.5 5.70365,-6.17735 6.37797,-7.49279 5.76282,-11.24186 -0.55199,-3.36417 -0.3529,-3.84111 1.97256,-4.72524 3.5577,-1.35264 3.25123,-2.5882 -1.36475,-5.50214 -3.0321,-1.91408 -4.11023,-3.34167 -4.63461,-6.13687 -0.92464,-4.92872 0.21557,-17.54699 1.66661,-18.44378 0.64332,-0.3976 1.21822,-2.57403 1.27754,-4.83651 0.0593,-2.26248 0.45299,-4.1136 0.8748,-4.1136 0.42181,0 0.76693,-0.65917 0.76693,-1.46482 0,-1.74638 2.25557,-3.01696 6.93438,-3.9062 1.88891,-0.35901 4.2148,-1.359 5.16864,-2.22222 1.58715,-1.43634 1.92774,-1.376 4.01514,0.7114 l 2.28087,2.28087 0.81261,-3.13598 c 0.44694,-1.72478 1.59466,-3.372 2.55049,-3.66048 0.95583,-0.28848 6.1336,-0.36016 11.50617,-0.15929 7.76525,0.29033 11.6613,-0.10843 19,-1.94465 l 9.2317,-2.30986 3.69136,2.90561 c 2.03025,1.59809 3.97737,2.90562 4.32692,2.90562 0.34956,0 1.94949,1.31392 3.5554,2.91983 1.60591,1.60591 4.26861,3.21609 5.91712,3.57815 1.64851,0.36207 3.39426,1.36768 3.87945,2.23466 0.551,0.98458 1.53238,1.32683 2.61418,0.91171 1.36425,-0.52351 1.60287,-1.40565 1.12379,-4.15448 -1.96846,-11.29466 -1.99907,-10.48987 0.39901,-10.48987 1.73333,0 2.11033,-0.44245 1.70328,-1.999 -0.28751,-1.09946 -0.10766,-2.25555 0.39968,-2.5691 1.35261,-0.83596 -0.084,-2.65594 -1.62858,-2.06322 -0.72385,0.27778 -1.56421,-0.14155 -1.86747,-0.93182 -0.30325,-0.79027 -1.35299,-1.44243 -2.33276,-1.44924 -2.25138,-0.0156 -5.9229,-5.61859 -7.46847,-11.39733 -1.36448,-5.10161 0.16078,-16.0943 2.78984,-20.10677 2.68558,-4.0987 3.73606,-22.538048 1.36739,-24.001968 -1.0102,-0.624342 1.80071,-12.872292 3.05443,-13.308983 1.68284,-0.586165 3.15405,-7.970283 2.01285,-10.102645 -0.57058,-1.06614 -1.03742,-3.291462 -1.03742,-4.945161 0,-1.653698 -0.45,-3.284839 -1,-3.624758 -1.81416,-1.121213 -1.04292,-6.170558 1.69909,-11.124047 1.48451,-2.681774 3.04793,-5.022094 3.47428,-5.200711 0.42635,-0.178616 2.18434,-1.641116 3.90666,-3.25 1.72231,-1.608883 4.15653,-2.925242 5.40936,-2.925242 2.71315,0 9.51061,7.089739 9.51061,9.919547 0,1.052583 0.49508,2.078814 1.10019,2.280515 1.56064,0.520213 1.54774,11.108698 -0.0227,18.637282 -0.94945,4.551627 -1.02631,6.94673 -0.27275,8.5 2.05212,4.229931 2.09506,11.94645 0.10809,19.425443 -1.34487,5.062119 -2.04462,11.656388 -2.30937,21.762828 -0.20892,7.97503 -0.83369,15.05677 -1.38838,15.73722 -0.55469,0.68043 -1.57461,3.14428 -2.2665,5.4752 -0.69189,2.33092 -2.52586,5.48092 -4.0755,7 -2.08101,2.03997 -2.82478,3.74222 -2.84529,6.51196 -0.0153,2.0625 -0.40655,3.75 -0.86949,3.75 -0.46294,0 -1.37004,1.76338 -2.01576,3.91863 -0.94742,3.16218 -0.89188,4.75474 0.2877,8.25 1.2224,3.62216 3.53587,15.38598 3.56222,18.11359 0.004,0.43023 -1.00098,1.15531 -2.23363,1.6113 -1.61951,0.59909 -2.56769,0.38255 -3.41824,-0.78066 -0.64738,-0.88534 -1.50298,-1.2838 -1.90132,-0.88545 -0.39834,0.39834 -0.0976,1.48287 0.66824,2.41006 0.76587,0.92718 1.3925,2.62556 1.3925,3.77416 0,2.13367 0.12494,2.1598 8.17857,1.71003 1.19822,-0.0669 2.78565,-0.72874 3.52763,-1.47072 2.80908,-2.80907 8.64009,-3.9539 13.37971,-2.62689 2.42775,0.67973 4.41409,1.62739 4.41409,2.10591 0,0.47852 1.28026,0.87004 2.84501,0.87004 1.59545,0 3.65748,0.89776 4.69483,2.04402 2.52191,2.78669 5.92786,2.20074 6.06859,-1.04402 0.0596,-1.375 0.17214,-3.94838 0.25,-5.71862 0.10082,-2.29207 0.53906,-3.06608 1.52239,-2.68874 0.85878,0.32955 1.79848,-0.53296 2.48556,-2.28138 1.44675,-3.68162 3.33047,-6.61732 4.88362,-7.61095 0.6875,-0.43983 1.25,-1.42201 1.25,-2.18261 0,-0.76061 0.79504,-1.63526 1.76676,-1.94367 1.28603,-0.40817 1.79615,-1.68185 1.87479,-4.68099 0.0594,-2.26613 0.51493,-4.40662 1.01225,-4.75664 0.49731,-0.35002 1.72504,-4.6864 2.72829,-9.6364 1.00325,-4.95 2.0102,-9.195 2.23767,-9.43333 0.22746,-0.23834 0.94607,0.0992 1.59691,0.75 2.05024,2.05025 2.78332,1.3084 2.78332,-2.81667 0,-2.2 0.45,-4 1,-4 1.35769,0 1.26911,-9.92956 -0.12424,-13.92654 -0.83231,-2.38758 -0.83231,-3.51691 0,-4.34922 0.61833,-0.61833 1.12424,-1.68606 1.12424,-2.37272 0,-1.87071 4.2876,-6.13016 7.33815,-7.28998 1.86797,-0.7102 4.27952,-0.67414 7.92354,0.1185 4.18795,0.91095 6.10717,2.05984 9.57144,5.72969 4.23281,4.484 4.31948,4.71134 3.7437,9.81956 -0.66906,5.93577 -3.23928,12.14532 -5.82683,14.07741 -0.9625,0.71869 -1.75,1.70473 -1.75,2.1912 0,0.48646 -2.25,3.23119 -5,6.09938 -2.75,2.8682 -5,6.04466 -5,7.05881 0,1.01415 -0.40122,1.84391 -0.89159,1.84391 -0.49038,0 -1.148,1.02162 -1.4614,2.27027 -0.69667,2.77577 -6.17128,11.16309 -9.3824,14.37421 -2.44226,2.44227 -5.69067,3.09319 -6.76461,1.35552 -0.33992,-0.55 -1.04148,-1 -1.55902,-1 -1.25948,0 -1.20887,4.7164 0.059,5.5 0.55,0.33992 1,1.40176 1,2.35965 0,2.1878 -2.24836,7.12214 -3.25,7.13255 -0.4125,0.004 -0.75,0.60165 -0.75,1.32746 2e-5,1.36484 -4.40993,5.68034 -5.80464,5.68034 -1.67123,0 -8.19534,7.68794 -8.19534,9.6573 0,1.14014 0.94307,3.2719 2.09571,4.73724 2.24875,2.85884 1.95315,5.60546 -0.60328,5.60546 -1.28437,0 -1.19904,0.39855 0.46861,2.18856 2.0939,2.24753 2.73151,6.26539 1.14945,7.24315 -1.20147,0.74255 -2.25672,7.02275 -2.1454,12.76808 0.0757,3.90626 -0.29358,4.91334 -2.18702,5.96458 -1.25294,0.69561 -2.53521,1.28072 -2.8495,1.30019 -0.31428,0.0195 -1.35893,0.82294 -2.32143,1.78544 -2.14512,2.14512 -3.74778,2.28008 -2.96877,0.25 0.31659,-0.825 0.0775,-1.5 -0.53138,-1.5 -0.60885,0 -1.10699,0.45 -1.10699,1 0,0.55 -0.8376,1 -1.86133,1 -1.43686,0 -1.75435,0.55959 -1.39223,2.4539 0.38077,1.99188 -0.0219,2.57714 -2.13868,3.10841 -2.61438,0.65617 -3.48142,2.7797 -1.60776,3.93769 0.55,0.33992 1,1.71648 1,3.05902 0,1.34255 0.45,2.44098 1,2.44098 0.55,0 1,2.02501 1,4.5 0,2.92518 -0.43745,4.50536 -1.25,4.51531 -0.84605,0.0104 -0.77437,0.31612 0.22182,0.94612 1.24482,0.78724 1.28337,1.63536 0.25,5.49903 -1.70092,6.35954 -1.62349,11.90765 0.15666,11.22455 2.05601,-0.78896 3.05353,11.63069 1.54855,19.28035 -0.65298,3.31906 -1.51939,6.03464 -1.92536,6.03464 -0.40597,0 -1.4957,2.7 -2.42163,6 -0.92594,3.3 -2.11024,6 -2.63178,6 -0.52154,0 -0.94826,0.62356 -0.94826,1.38569 0,0.76214 -0.67223,2.67463 -1.49384,4.25 -0.82161,1.57538 -1.49661,3.87681 -1.5,5.11431 -0.006,2.02072 -0.49645,2.25 -4.8176,2.25 -3.42919,0 -5.42816,0.57457 -6.95819,2 -1.18071,1.10001 -2.51622,2 -2.9678,2 -0.45158,0 -1.46973,0.9 -2.26257,2 -1.48885,2.06567 -5,2.7679 -5,1 z m -63.32804,-20.19 c 1.73749,-1.91992 1.73362,-2.04026 -0.10897,-3.3876 -3.23548,-2.36583 -8.51342,-2.90054 -10.364,-1.04995 -1.50341,1.5034 -1.47538,1.62755 0.36749,1.62755 1.28866,0 2.38736,1.03935 3.10306,2.93547 1.26371,3.34794 3.9018,3.30068 7.00242,-0.12547 z m 5.51137,-1.02666 c -0.71756,-0.71757 -1.18333,-0.77661 -1.18333,-0.15001 0,1.33478 1.18261,2.5174 1.85,1.85 0.28417,-0.28416 -0.0158,-1.04916 -0.66667,-1.69999 z m -0.76512,-1.39033 c 1.60658,-0.6165 2.24632,-3.39301 0.78179,-3.39301 -1.03498,0 -3.2,2.16502 -3.2,3.2 0,0.95968 0.34794,0.98745 2.41821,0.19301 z m 24.39927,-38.2072 c 2.8287,-2.82619 5.04257,-3.9678 9.49237,-4.89488 5.64742,-1.17658 9.57706,-4.04172 9.65688,-7.04093 0.0183,-0.6875 0.37077,-1.25351 0.78327,-1.2578 1.19908,-0.0125 3.25,-5.14086 3.25,-8.12671 0,-2.031 0.99792,-3.4531 3.87366,-5.52022 2.24348,-1.61265 4.66329,-4.58181 5.75,-7.05538 1.03199,-2.34902 2.14813,-4.27521 2.48032,-4.28042 0.33218,-0.005 1.79468,-1.11298 3.25,-2.46172 2.8603,-2.65084 3.62888,-7.83143 1.37201,-9.24806 -0.7007,-0.43983 -2.01625,-1.96878 -2.92344,-3.39767 -0.9072,-1.42889 -3.48389,-4.3962 -5.726,-6.59401 -2.2421,-2.19781 -4.07655,-4.24909 -4.07655,-4.5584 0,-0.85947 4.25275,0.39276 6.47251,1.90584 2.38913,1.62854 3.52749,1.71078 3.52749,0.25484 0,-1.56809 -4.19028,-4.83786 -6.25,-4.87702 -0.9625,-0.0183 -1.79981,-0.59577 -1.86069,-1.28327 -0.26744,-3.02011 0.38169,-6.27973 1.31854,-6.62105 0.58335,-0.21252 0.43817,-0.72969 -0.33983,-1.21052 -1.08486,-0.67048 -0.95667,-1.13983 0.63685,-2.33165 1.09732,-0.82069 3.23263,-1.77422 4.74513,-2.11894 2.89625,-0.66008 3.8119,-2.46784 1.25,-2.46784 -1.81906,0 -1.86045,-0.44997 -0.27495,-2.98876 1.02993,-1.64916 0.91647,-2.18727 -0.71225,-3.37822 -1.64727,-1.20452 -1.73749,-1.65736 -0.60261,-3.02481 2.66682,-3.21331 -3.24084,-1.71438 -7.16019,1.81674 -3.36968,3.03589 -3.75,3.8787 -3.75,8.31013 0,5.42765 -0.66925,6.78431 -2.56896,5.20769 -0.86811,-0.72047 -1.45204,-0.7178 -1.90103,0.009 -1.04315,1.68785 -4.44069,1.20968 -6.76038,-0.95144 -2.58884,-2.4122 -3.76963,-2.54161 -3.76963,-0.41347 0,0.87278 1.35,2.09644 3,2.71925 3.11923,1.17737 4.24298,4.6939 1.5,4.6939 -0.825,0 -1.5,0.5051 -1.5,1.12244 0,0.7392 -0.4268,0.79729 -1.25,0.17013 -0.6875,-0.52378 -4.79798,-0.86486 -9.13441,-0.75797 -6.13858,0.15132 -8.08826,0.55863 -8.80505,1.83946 -0.50635,0.90481 -2.58337,2.34827 -4.61559,3.2077 -3.40957,1.44191 -3.95174,1.4259 -7.01971,-0.20731 -4.10921,-2.18751 -6.34454,-1.09052 -7.3003,3.58263 -0.57139,2.7938 -0.17675,3.80996 2.72853,7.02575 1.86809,2.06776 3.3993,4.60502 3.40269,5.63837 0.003,1.03334 0.6969,3.20341 1.54113,4.82239 1.28405,2.46239 1.32822,3.44275 0.27018,5.99708 -1.41921,3.42626 -1.19964,7.35319 0.52961,9.47195 0.87803,1.07581 0.85488,1.51293 -0.0971,1.83333 -1.7997,0.60573 -1.53961,3.03859 0.65421,6.11952 1.04732,1.47082 2.23478,4.9153 2.6388,7.65438 0.40402,2.73908 1.07777,5.20515 1.49721,5.48015 0.41945,0.275 0.97601,1.85 1.23681,3.5 0.26079,1.65 1.88015,5.3823 3.59857,8.294 1.71842,2.9117 3.20005,5.83671 3.2925,6.5 0.0925,0.66329 0.34635,-0.5104 0.5642,-2.6082 0.28553,-2.74964 1.42573,-4.84292 4.08518,-7.5 z m 26.18252,-83.68581 c 0,-1.375 0.45,-2.5 1,-2.5 0.55,0 1,1.125 1,2.5 0,1.375 -0.45,2.5 -1,2.5 -0.55,0 -1,-1.125 -1,-2.5 z m 5,-2.94098 c 0,-3.68859 1.60946,-5.74048 2.21294,-2.82126 0.51651,2.49851 -0.28256,6.26224 -1.32952,6.26224 -0.48588,0 -0.88342,-1.54844 -0.88342,-3.44098 z m -100,95.44098 c 0,-0.55 -0.45,-1 -1,-1 -0.55,0 -1,0.45 -1,1 0,0.55 0.45,1 1,1 0.55,0 1,-0.45 1,-1 z m 7.98635,-4.75 c -0.033,-4.23065 -1.23169,-6.25 -3.70997,-6.25 -1.86004,0 -2.33673,0.40037 -1.88337,1.58179 0.33385,0.86998 0.60699,1.99498 0.60699,2.5 0,0.50501 0.94814,0.91821 2.10699,0.91821 1.46204,0 1.93079,0.45915 1.53138,1.5 -0.31658,0.825 -0.13972,1.5 0.39301,1.5 0.53274,0 0.96248,-0.78749 0.95497,-1.75 z m 104.01365,-7.19098 c 0,-1.17986 -1.95035,-2.442 -2.66667,-1.72569 -0.71631,0.71632 0.54583,2.66668 1.72569,2.66668 0.51754,0 0.94098,-0.42344 0.94098,-0.94098 z m 22.5,-32.05902 c 0.35052,-0.56716 -0.48962,-1 -1.94098,-1 -1.40746,0 -2.55902,0.45 -2.55902,1 0,0.55 0.87344,1 1.94098,1 1.06754,0 2.2191,-0.45 2.55902,-1 z m -93.8913,-30.42268 c 0.60004,-1.56368 -2.87119,-5.5642 -4.8587,-5.59956 -0.6875,-0.0122 -2.375,-0.90222 -3.75,-1.97776 -1.375,-1.07554 -3.0625,-1.96553 -3.75,-1.97776 -2.14926,-0.0382 -1.36942,2.40425 1.5,4.69805 1.5125,1.20909 3.875,3.10168 5.25,4.20576 2.96819,2.38335 4.85976,2.603 5.6087,0.65128 z m 92.3913,-2.99399 c 0,-0.77916 0.53096,-1.59365 1.17991,-1.80997 1.63552,-0.54517 0.35705,-3.41562 -2.10914,-4.73549 -1.88986,-1.01142 -1.97052,-0.90439 -1.08124,1.43459 0.62067,1.6325 0.61562,2.52754 -0.0143,2.52754 -0.53639,0 -0.97525,-0.47656 -0.97525,-1.05902 0,-0.58246 -0.40752,-0.80715 -0.9056,-0.49932 -1.224,0.75647 1.06492,5.54061 2.6556,5.55054 0.6875,0.004 1.25,-0.6297 1.25,-1.40887 z m -54.73202,-28.33333 c -0.28419,-1.86597 -1.08542,-3.25 -1.88148,-3.25 -1.89862,0 -1.74034,2.15713 0.34705,4.72974 2.11507,2.60669 2.15145,2.57161 1.53443,-1.47974 z m 27.16199,-9.36331 c -1.00883,-1.63232 -2.42997,-0.90961 -2.42997,1.23575 0,1.76626 0.24988,1.91507 1.48899,0.8867 0.81894,-0.67966 1.24239,-1.63477 0.94098,-2.12245 z m 1.57003,-6.44571 c 0,-2.11803 -0.40488,-3.30878 -1,-2.94098 -0.55,0.33992 -1,1.94148 -1,3.55902 0,1.61754 0.45,2.94098 1,2.94098 0.55,0 1,-1.60156 1,-3.55902 z m -2.15282,-47.19176 c 1.5025,-1.20828 1.47093,-1.30206 -0.34718,-1.03101 -1.52415,0.22723 -2.0368,1.12897 -2.15467,3.78998 -0.10264,2.31697 0.0142,2.66385 0.34717,1.031 0.27602,-1.35345 1.24562,-3.05894 2.15468,-3.78997 z m 7.15282,-0.64223 c 0,-0.21616 -0.69837,-0.661 -1.55194,-0.98854 -0.88992,-0.3415 -1.29132,-0.17385 -0.94098,0.393 0.58726,0.95021 2.49292,1.40545 2.49292,0.59554 z m 76.5,-1.60699 c 0.33992,-0.54999 0.16803,-1 -0.38197,-1 -0.55,0 -1.27811,0.45001 -1.61803,1 -0.33992,0.55 -0.16803,1 0.38197,1 0.55,0 1.27811,-0.45 1.61803,-1 z m -116.5,214.55902 c 0,-0.79254 0.45,-1.7191 1,-2.05902 0.55,-0.33992 1,0.30852 1,1.44099 0,1.13245 -0.45,2.05901 -1,2.05901 -0.55,0 -1,-0.64844 -1,-1.44098 z m -18.73097,-0.25201 c 0.97297,-0.25354 2.32297,-0.23687 3,0.0371 0.67703,0.27393 -0.11903,0.48138 -1.76903,0.46099 -1.65,-0.0204 -2.20394,-0.2445 -1.23097,-0.49804 z m -30.00713,-4.99748 c 0.92977,-0.92976 2.02566,-1.3553 2.43533,-0.94563 0.40967,0.40967 0.0829,1.1635 -0.72619,1.67516 -2.43457,1.53967 -3.51652,1.07786 -1.70914,-0.72953 z M 49.524011,223.90769 c -0.333,-1.04919 -1.228395,-2.14666 -1.989765,-2.43883 -1.7239,-0.66152 -0.848578,-4.65355 1.020371,-4.65355 0.729666,0 1.914682,0.79532 2.633369,1.76738 0.718687,0.97206 2.544204,2.55743 4.056704,3.52306 3.833187,2.44721 3.430746,3.70957 -1.182612,3.70957 -2.990872,0 -4.077601,-0.45682 -4.538067,-1.90762 z m -15.043183,-6.11481 c -0.256982,-0.41581 -1.682565,-1.06104 -3.167962,-1.43385 -3.054174,-0.76655 -6.255433,-4.07155 -9.970604,-10.29372 -1.395689,-2.3375 -2.944856,-4.25 -3.442594,-4.25 -0.497738,0 -0.904978,-0.6031 -0.904978,-1.34023 0,-0.73713 -1.341848,-3.77463 -2.981885,-6.75 -3.672064,-6.6619 -3.92171,-11.9673 -0.778944,-16.55387 2.890922,-4.21902 8.454383,-6.77116 12.902833,-5.91893 5.606429,1.07406 12.615308,4.90114 14.356608,7.83918 0.904944,1.52688 2.73796,3.95509 4.07337,5.39602 2.277894,2.45789 2.923163,4.54977 2.615654,8.47961 -0.07109,0.90848 0.532612,2.20108 1.341556,2.87245 0.808945,0.67136 1.470808,1.84056 1.470808,2.59821 0,0.75766 0.45,1.37756 1,1.37756 1.398992,0 1.248085,5.34878 -0.245539,8.70295 -0.685047,1.53838 -2.346924,3.69705 -3.693062,4.79705 -2.884527,2.3571 -11.90152,5.56771 -12.575261,4.47757 z m 85.513862,-63.9967 c 0,-0.53948 -0.65917,-0.98087 -1.46482,-0.98087 -2.22612,0 -3.52254,-3.30303 -2.87137,-7.3157 0.41626,-2.56515 -0.005,-4.7255 -1.46717,-7.53154 -1.12797,-2.16406 -2.82024,-7.80873 -3.7606,-12.54371 -0.94035,-4.73497 -2.00239,-8.60905 -2.36008,-8.60905 -0.35769,0 -0.72267,-0.96 -0.81105,-2.13336 -0.0884,-1.17335 -1.27655,-4.43584 -2.64037,-7.25 -1.36381,-2.81414 -2.79593,-6.91663 -3.18249,-9.116635 -0.38656,-2.2 -1.03377,-4.45 -1.43825,-5 -1.06266,-1.444991 -2.066358,-6.098787 -2.857653,-13.25 -0.563464,-5.092214 -0.424936,-6.25 0.747806,-6.25 0.791657,0 1.115397,-0.323984 0.719417,-0.719964 -0.39598,-0.39598 -1.617769,-0.73348 -2.715087,-0.75 -1.277584,-0.01923 -2.786913,-1.468621 -4.196703,-4.030036 -1.210869,-2.2 -2.53908,-4.15 -2.95158,-4.333333 -0.4125,-0.183334 -0.75,-1.609132 -0.75,-3.168441 0,-2.166734 0.833301,-3.350115 3.534696,-5.019669 2.652153,-1.639121 3.384368,-2.658205 2.932612,-4.08156 -0.334491,-1.053888 -0.12769,-1.896997 0.465304,-1.896997 2.035779,0 1.054776,-2.054297 -1.432612,-3 -4.870402,-1.851724 -1.621758,-9.482412 5.12982,-12.049358 3.10147,-1.179176 9.72633,-0.390579 11.68223,1.390604 0.69983,0.637315 2.15341,1.656986 3.23018,2.265937 1.07677,0.608951 2.12281,1.958951 2.32453,3 0.20172,1.041049 1.32672,3.242817 2.5,4.892817 1.862,2.618547 2.16574,4.589387 2.38886,15.5 0.1865,9.12009 0.83183,14.527946 2.38663,20 1.17206,4.125 2.33719,10.140784 2.58917,13.368408 0.36742,4.706092 0.83551,5.967097 2.36337,6.366637 1.78881,0.46778 2.47976,3.47383 2.12958,9.26496 -0.17249,2.85254 1.94473,11 2.85849,11 1.33839,0 1.12348,8.39365 -0.25008,9.76721 -0.88962,0.88963 -0.83016,1.29683 0.25,1.71223 1.01951,0.39208 1.40626,2.29552 1.37818,6.78279 -0.0464,7.41614 -0.33216,8.49003 -3.00077,11.27758 -2.16221,2.25856 -11.46019,4.23907 -11.46019,2.44105 z m 42.75,-14.06823 c -0.9625,-1.6911 -1.75,-3.63481 -1.75,-4.31936 0,-0.68455 -1.125,-2.30153 -2.5,-3.59328 -1.375,-1.29175 -2.5,-3.13269 -2.5,-4.09098 0,-0.95829 -0.54066,-1.92257 -1.20147,-2.14284 -1.25769,-0.41923 -0.20724,-10.95928 2.06961,-20.76618 1.26289,-5.439545 1.45953,-17.679448 0.29559,-18.398804 -0.45995,-0.284264 -0.91639,-2.634972 -1.01431,-5.223795 -0.0979,-2.588824 -0.57072,-5.195302 -1.05066,-5.792174 -1.46261,-1.818937 -2.43766,-9.632526 -2.31649,-18.56322 0.0875,-6.447234 -0.26369,-8.896482 -1.46605,-10.225078 -1.45845,-1.611567 -1.33812,-1.97405 1.55135,-4.673212 3.74721,-3.500421 3.86799,-4.123712 0.7991,-4.123712 -1.28334,0 -2.58863,-0.255294 -2.90066,-0.567319 -0.56673,-0.566732 2.15398,-9.263521 4.67156,-14.932681 0.73273,-1.65 1.89302,-4.600631 2.57842,-6.556958 0.72543,-2.070588 2.47889,-4.26444 4.19613,-5.25 3.24171,-1.860486 9.31357,-2.269516 10.28788,-0.693042 0.33992,0.55 1.46604,1 2.50248,1 1.03645,0 2.68191,1.35 3.65659,3 0.97468,1.65 2.05325,3 2.39682,3 0.34358,0 1.20108,2.402699 1.90557,5.339331 0.93488,3.89704 0.9892,5.884339 0.20109,7.356937 -1.35326,2.528593 -1.56013,7.606297 -1.14639,28.138008 0.20242,10.04548 -0.052,16.590583 -0.66087,17 -3.19902,2.151124 -5.00348,31.860269 -2.22699,36.665719 1.29634,2.24367 0.83629,15.83799 -0.68799,20.32951 -1.79148,5.27891 -3.72036,7.74684 -7.63829,9.77287 -4.09654,2.1184 -6.12711,1.69228 -8.05202,-1.68974 z m 112.25,-16.91264 c 0,-0.54999 0.45,-1 1,-1 0.55,0 1,0.45001 1,1 0,0.55 -0.45,1 -1,1 -0.55,0 -1,-0.45 -1,-1 z",style:{fill:"currentColor"},id:"path12"}))},Ht=r.a.forwardRef((function(e,t){return r.a.createElement(zt,At({svgRef:t},e))})),Nt=(n.p,function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={pageSelected:0,selectedCharacters:[]},n.getDisplayCharacter=function(){var e=n.state,t=e.selectedCharacters,a=e.pageSelected;if(!t.length)return null;var r=t[t.length-1];return a!==r.closeFor?null:r},n.onSwipe=function(e){var t=n.state.pageSelected;e.velocityX>0?--t<0&&(t=3):e.velocityX<0&&++t>3&&(t=0),n.setPage(t)},n.renderOverlay=function(){var e=n.props,t=e.classes,a=e.pageSizes,i=e.mode;return r.a.createElement("div",{className:K()(t.overlay,{visible:"visible"===i,kill:"killed-and-hidden"===i,hidden:"hidden"===i}),style:{top:a.top}})},n.renderSliderIndicatorsRowsContainer=function(){var e=n.props,t=e.classes,a=e.modalSizes,i=n.state.pageSelected,o=(T(n.props.modalSizes,3.5,"vh"),a.width/3);return r.a.createElement("div",{className:t.sliderIndicatorRow,style:{width:a.width-2*o,paddingLeft:o,paddingRight:o}},b.charTints.map((function(e,t){return n.renderSliderIndicator(t===i,t)})))},n.renderSliderIndicator=function(e,t){var a=3==t?n.state.selectedCharacters.filter((function(e){return e.isHealer})).length:n.state.selectedCharacters.filter((function(e){return!e.isHealer&&e.closeFor===t})).length;return r.a.createElement(Et,{key:t,isActive:e,isHealer:3==t,num:a,onClick:function(){return n.setPage(t)}},r.a.createElement(Ht,{color:b.charTints[t],viewBox:"0 0 340 340",width:"100%",height:"100%"}))},n.setPage=function(e){n.setState({pageSelected:e}),n.props.onSelectedCharacterChanged(null,n.state.selectedCharacters)},n.renderCardsRow=function(e){return 3===e?ye.map(n.renderCard):ve.filter((function(t){return t.closeFor===e})).map(n.renderCard)},n.renderCard=function(e){var t=n.props.classes,a=n.state.selectedCharacters;return r.a.createElement("div",{key:e.id},r.a.createElement("img",{draggable:!1,alt:e.name,className:K()(t.card,"c".concat(e.closeFor),{active:a.some((function(t){return t.id===e.id}))}),onClick:function(){return n.onCardClick(e)},src:"cards/".concat(e.id,".jpg")}))},n.onCardClick=function(e){var t=n.state.selectedCharacters,a=t.findIndex((function(t){return t.id===e.id}));if(a>=0){t.splice(a,1);var r=t[t.length-1]||null;n.props.onSelectedCharacterChanged(r,n.state.selectedCharacters)}else t.push(e),n.props.onSelectedCharacterChanged(e,n.state.selectedCharacters);n.setState({selectedCharacters:t})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.modalSizes,a=this.state.pageSelected,i="visible"===this.props.mode,o=this.getDisplayCharacter();return r.a.createElement("div",{style:{pointerEvents:i?"all":"none"}},this.renderOverlay(),r.a.createElement(Ot.a,{onSwipe:this.onSwipe},r.a.createElement("div",{className:K()(t.wrapper,Object(H.a)({},t.visible,i)),style:{left:n.left,bottom:n.bottom,width:n.width,height:n.height}},r.a.createElement(Pt,{text:null===o||void 0===o?void 0:o.name}),r.a.createElement("div",{className:t.cardSelectionRow},this.renderCardsRow(a)),this.renderSliderIndicatorsRowsContainer())))}},{key:"componentDidUpdate",value:function(e,t,n){"visible"!==this.props.mode&&this.state.selectedCharacters.length&&this.setState({pageSelected:0,selectedCharacters:[]})}}]),t}(a.Component)),It=Object(C.a)({"@keyframes appear":{from:{opacity:0},to:{opacity:1}},"@keyframes disappear":{from:{opacity:1},to:{opacity:0}},"@keyframes disappearP":{from:{opacity:.3},to:{opacity:0}},wrapper:{position:"absolute",background:"black",opacity:0,transition:"0.3s linear all",pointerEvents:"none"},visible:{animationName:"$appear",animationDuration:"0.3s",animationDelay:"0.7s",animationFillMode:"forwards",opacity:0,pointerEvents:"all"},cardSelectionRow:{display:"flex",justifyContent:"space-around"},card:{height:"20vh",transition:"0.3s linear all","&.active":{transform:"scale(1.1) translateY(1vh)","&.c0":{boxShadow:"0px 0px 30px 10px ".concat(b.charTints[0])},"&.c1":{boxShadow:"0px 0px 30px 10px ".concat(b.charTints[1])},"&.c2":{boxShadow:"0px 0px 30px 10px ".concat(b.charTints[2])},"&.c3":{boxShadow:"0px 0px 30px 10px ".concat(b.charTints[3])}}},sliderIndicatorRow:{position:"absolute",bottom:"1vh",display:"flex",justifyContent:"space-around",height:"3.5vh"},overlay:{position:"absolute",width:"100%",height:"100%",opacity:0,animationFillMode:"forwards",transition:"0.2s linear all",background:"linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,1) 100%)","&.visible":{animationName:"$appear",animationDelay:"0.7s",animationDuration:"0.3s"},"&.kill":{opacity:.3,animationName:"$disappearP",animationDelay:"".concat(jt.destructionTotal-.3,"s"),animationDuration:"0.3s"},"&.hidden":{opacity:1,animationName:"$disappear",animationDuration:"0.3s"}}}),Lt=Object(j.a)(It)(Nt),Rt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).crows=[],n.container=null,n.reverseSprites=function(){n.crows.forEach((function(e){var t=e.start;e.start=e.target,e.target=t,e.isTop=!e.isTop,e.isLeft=!e.isLeft,e.done={x:!1,y:!1},e.sprite.gotoAndPlay(ae(0,10)),e.sprite.scale.set(-e.sprite.scale.x),e.sprite.angle=e.sprite.angle-180;var n=ae(50,150);e.speed={x:(e.target.x-e.start.x)/n,y:(e.target.y-e.start.y)/n}}))},n.start=function(){var e=n.props.rect;n.crows.length&&(n.crows.forEach((function(e){return e.sprite.destroy()})),n.crows=[]);for(var t=e.width/25,a=e.height/25,r=function(){return ae(-25,25)},i=0;i<t;i++)for(var o=0;o<a;o++){var s=n.createSprite({x:e.x+25*i+r(),y:e.y+25*o+r()});n.crows.push(s)}},n.createSprite=function(e){var t=n.props.pageSizes.viewport,a=re(),r=re(),i=ae(5,10)/10,o={x:a?ae(-300,0):ae(t.width,t.width+300),y:r?ae(-300,0):ae(t.height,t.height+300)},s=ae(80,120),c=new ge.AnimatedSprite(n.props.resources.crows);c.x=o.x,c.y=o.y,c.anchor.set(.5),c.scale.set(i,i),c.animationSpeed=ae(5,10)/10,c.angle=ae(0,30),c.gotoAndPlay(ae(0,10)),a||(c.scale=new ge.Point(-i,i));var l={x:(e.x-o.x)/s,y:(e.y-o.y)/s};return n.container.addChild(c),{start:o,sprite:c,speed:l,target:e,isLeft:a,isTop:r,done:{x:!1,y:!1}}},n.checkCoord=function(e,t,n){t?e.sprite[n]>e.target[n]&&(e.sprite[n]=e.target[n],e.done[n]=!0):e.sprite[n]<e.target[n]&&(e.sprite[n]=e.target[n],e.done[n]=!0)},n.tick=function(){var e=n.props.app.ticker.elapsedMS;n.crows.forEach((function(t){t.done.x&&t.done.y||(t.sprite.x+=e*(t.speed.x/10),t.sprite.y+=e*(t.speed.y/10),n.checkCoord(t,t.isLeft,"x"),n.checkCoord(t,t.isTop,"y"),t.done.x&&t.done.y&&t.sprite.stop())}))},e.app.ticker.add(n.tick),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isVisible&&this.start()}},{key:"componentWillUnmount",value:function(){this.props.app.ticker.remove(this.tick)}},{key:"shouldComponentUpdate",value:function(e,t,n){return!e.isVisible&&this.props.isVisible&&this.reverseSprites(),e.isVisible&&!this.props.isVisible&&this.start(),e.isVisible&&e.rect.x!==this.props.rect.x&&this.start(),!1}},{key:"render",value:function(){var e=this;return r.a.createElement(Ee.Container,{ref:function(t){return e.container=t}})}}]),t}(a.Component),Ft=Pe(Object(Ee.withPixiApp)(Rt)),Dt=n(244),Wt=Object(Ee.withPixiApp)(Pe(Object(Ee.PixiComponent)("DisappearingCard",{create:function(e){var t=e.scale,n=e.resources,a=e.target,r=e.position,i=ge.Sprite.from(n.cardMaskTex);i.x=-60,i.y=-98;var o=ge.Sprite.from(e.tex),s=ge.Sprite.from(e.resources.cloudTex);s.scale.set(t,t),s.texture.baseTexture.wrapMode=ge.WRAP_MODES.REPEAT;var c=new ge.filters.DisplacementFilter(s,0);c.padding=500;var l=new ge.Container;l.position.set(r.x,r.y),l.scale.set(t,t);var u=(new Dt.d).to(l.position,jt.cardRealign,{x:a.x,y:a.y}).to(l.scale,jt.cardRealign,{x:a.scale,y:a.scale},jt.mod("cardRealign")),p=(new Dt.d).to(s.anchor,jt.destruction,{x:.1*a.scale,y:.4*a.scale}).to(c.scale,jt.destruction,{x:-3e3,y:-3e3,ease:Dt.a.easeIn},jt.mod("destruction")).to(l,jt.destruction,{alpha:0,ease:Dt.c.easeIn},jt.mod("destruction")),d=new Dt.d({paused:!0}).add(u).add(p);return o.filters=[c],l.addChild(o),l.addChild(i),i.isMask=!0,l.mask=i,d.play(),l}}))),Bt=Pe(function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.sizes,a=t.pageSizes,i=t.resources;if(!i||!this.props.selectedCharacter)return null;var o=null===i||void 0===i?void 0:i.characterCards[null===(e=this.props.selectedCharacter)||void 0===e?void 0:e.id],s=n.width/o.width*o.height,c=.1*s,l=s-c,u=a.middle-n.pixiTop,p=u>l?s:u;this.props.positionCalculated({x:n.left,y:-c,width:n.width,height:p});var d=p/s*o.height;return r.a.createElement(Ee.Container,null,r.a.createElement(Ee.Sprite,{texture:new ge.Texture(o,new ge.Rectangle(0,0,o.width,d)),width:n.width,height:p,x:n.left,y:-c}))}}]),t}(a.Component));function Ut(e,t,n){var a=t.width/t.height,r=.98,i=.98;var o=function(){var e=r/2.5,t=e/n*a;if(2*t>i){var o=i/(2.2*t);return{cardHeight:t*o,cardWidth:e*o}}return{cardHeight:t,cardWidth:e}}(),s=o.cardWidth,c=o.cardHeight,l=(r-2*s)/3,u=(i/2-c)/2+.01,p=u+c+(i-2*c)/3;return[{x:.01+l,y:u,width:s,height:c},{x:.01+s+2*l,y:u,width:s,height:c},{x:.01+l,y:p,width:s,height:c},{x:.01+s+2*l,y:p,width:s,height:c}]}var _t=Object(Ee.PixiComponent)("QuarantineCard",{create:function(e){var t=e.scale,n=e.target,a=e.position,r=ge.Sprite.from(e.tex),i=ge.Sprite.from(e.tex);i.alpha=0;var o=new ge.filters.ColorMatrixFilter;o.greyscale(1.3,!1),i.filters=[o];var s=new ge.Container;s.position.set(a.x,a.y),s.scale.set(t,t);var c=(new Dt.d).to(s.position,jt.cardRealign,{x:n.x,y:n.y}).to(s.scale,jt.cardRealign,{x:n.scale,y:n.scale},jt.mod("cardRealign")),l=(new Dt.d).to(i,jt.destruction,{alpha:.6},jt.mod("destruction")).to(s,jt.destruction,{alpha:0,ease:Dt.b.easeIn},jt.mod("destruction")),u=new Dt.d({paused:!0}).add(c).add(l);return s.addChild(r),s.addChild(i),u.play(),s}}),Gt=Pe(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).position=null,n.renderCards=function(){for(var e=n.props,t=e.allSelectedCharacters,a=e.resources,i=e.pageSizes,o=function(e,t,n){switch(e){case 1:return function(e,t,n){var a=t.width/t.height,r=.9;var i=function(){var e=r*a,t=r*n;if(e>r){var i=r/e;return{cardHeight:e*i,cardWidth:t*i}}return{cardHeight:e,cardWidth:t}}(),o=i.cardWidth,s=i.cardHeight;return[{x:(1-o)/2+0,y:(r-s)/2+.05,width:o,height:s}]}(0,t,n);case 2:return function(e,t,n){var a=t.width/t.height,r=.98,i=.98;var o=function(){var e=r/2.5,t=e/n*a;if(t>i){var o=i/t;return{cardHeight:t*o,cardWidth:e*o}}return{cardHeight:t,cardWidth:e}}(),s=o.cardWidth,c=o.cardHeight,l=(r-2*s)/3,u=(i-c)/2+.01;return[{x:.01+l,y:u,width:s,height:c},{x:.01+s+2*l,y:u,width:s,height:c}]}(0,t,n);case 3:return function(e,t,n){var a=t.width/t.height,r=.98,i=.98;var o=function(){var e=r/2.5,t=e/n*a;if(2*t>i){var o=i/(2.2*t);return{cardHeight:t*o,cardWidth:e*o}}return{cardHeight:t,cardWidth:e}}(),s=o.cardWidth,c=o.cardHeight,l=(r-2*s)/3,u=(i/2-c)/2+.01;return[{x:.01+l,y:u,width:s,height:c},{x:.01+s+2*l,y:u,width:s,height:c},{x:(r-s)/2+.01,y:u+c+(i-2*c)/3,width:s,height:c}]}(0,t,n);case 4:return Ut(e,t,n)}for(var a=Ut(e,t,n),r=e-4,i=0;r>0;i++,r--)a.push(a[i]);return a}(t.length,{width:n.props.pageSizes.viewport.width,height:n.props.pageSizes.middle},.61),s=i.viewport.width,c=i.middle,l=[],u=0;u<t.length;u++){var p=t[u],d=o[u],h=new ge.Texture(a.characterCards[p.id]),m=n.position.width/h.width,f={x:d.x*s,y:d.y*c,scale:d.height*c/h.height};p.isHealer?l.push(r.a.createElement(_t,{scale:m,tex:h,target:f,position:n.position,key:p.id})):l.push(r.a.createElement(Wt,{scale:m,tex:h,target:f,position:n.position,key:p.id}))}return l},n.onPositionCalculated=function(e){return n.position=e},n.position=e.position||null,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return"visible"===this.props.mode?r.a.createElement(Bt,{positionCalculated:this.onPositionCalculated,pageSizes:this.props.pageSizes,sizes:this.props.sizes,selectedCharacter:this.props.selectedCharacter}):"killed-and-hidden"===this.props.mode&&this.position&&this.props.allSelectedCharacters.length?this.renderCards():null}}]),t}(a.Component)),Vt=function e(t){var n=this;Object(s.a)(this,e),this.charChanged=t,this.relativeSizes={w:85,h:32},this.modalMode="visible",this.selectedCharacters=[],this.lastChar=null,this.props=null,this.setProps=function(e){return n.props=e},this.renderModal=function(e){var t=e.sizes,a=e.pageSizes,i={bottom:t.bottom,height:t.height,left:t.left,width:t.width};return r.a.createElement(Lt,{modalSizes:i,pageSizes:a,mode:n.modalMode,onSelectedCharacterChanged:n.onCharacterChanged})},this.renderBackdrop=function(e){var t=e.sizes,a=e.pageSizes;return r.a.createElement(r.a.Fragment,null,n.renderCharacterOverlay(e),r.a.createElement(Ft,{isVisible:"visible"===n.modalMode,rect:{x:t.left,y:t.pixiTop,width:t.width,height:t.height},pageSizes:a}))},this.renderCharacterOverlay=function(e){var t=e.sizes,a=e.pageSizes;return r.a.createElement(Gt,{allSelectedCharacters:n.selectedCharacters,selectedCharacter:n.lastChar,sizes:t,pageSizes:a,mode:n.modalMode})},this.onCharacterChanged=function(e,t){var a;n.selectedCharacters=t,n.lastChar=e,null===(a=n.props)||void 0===a||a.update(),n.charChanged(t)},this.contaminate=function(e){var t;e.length?n.modalMode="killed-and-hidden":n.modalMode="hidden",null===(t=n.props)||void 0===t||t.update()}},Kt=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{characters:[]}))).props=n,a.modalController=void 0,a.charChanged=function(e){return a.setState({characters:e})},a.renderProps=function(){var e=a.state.characters;return{mainMsg:We.turnNo({turn:a.props.turnNo})+" - "+We.phase({phase:2}),msg:We.selectCharacter(),modalController:a.modalController,bottomButtons:function(){return r.a.createElement(G,{iconHref:"icons/checkmark.png",isVisible:a.props.emptyOk||!!e.length,onClick:function(){return a.closeModal(e)},tooltip:{id:"t-contaminate",direction:"top",tooltipHint:We.contaminate()}})},onMapBottomButtons:function(){return r.a.createElement(G,{iconHref:"icons/cross.png",onClick:a.onClose,tooltip:{id:"t-close",direction:"left",tooltipHint:We.close()}})}}},a.onClose=function(){a.modalController.contaminate([]),a.routeProps.popState(new bt({modalController:a.modalController},ie(1e3*jt.birdsFlyOff)))},a.closeModal=function(e){a.modalController.contaminate(e),a.routeProps.popState(new bt({modalController:a.modalController},ie(1e3*(jt.birdsFlyOff+(e.length?jt.destructionTotal:0))))),(e.length||a.props.emptyOk)&&a.props.onCharactersSelected(e),a.routeProps.update()},a.modalController=new Vt(a.charChanged),a}return Object(p.a)(t,e),t}(xt),Xt=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{}))).props=n,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this;return{msg:We.confirmTurnEnd(),msgAccented:!0,bottomButtons:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:"icons/checkmark.png",onClick:function(){e.routeProps.popState(),e.props.onTurnEnd()}}),r.a.createElement(G,{iconHref:"icons/cross.png",onClick:function(){return e.routeProps.popState()}}))},onMapBottomButtons:function(){return null},mapSnapshot:Object(h.a)({},this.props.mapSnapshot,{grayscale:!0})}}}]),t}(xt),qt=[{name:"\u041c\u0456\u0441\u0456\u0457",indicatorImage:"icons/missions.png",items:[{id:"m-12",name:"\u0412\u0435\u0440\u0445\u043e\u043c \u043d\u0430 \u043a\u0440\u044b\u0441\u0430\u0445",image:"cards/missions/12.jpg",type:"mission"}]},{name:"\u0428\u0442\u0430\u043c\u0438",indicatorImage:"icons/stamm.png",items:[{id:"s-plus-movement",name:"\u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u0435",image:"cards/stams/bonus_movement.jpg",type:"stam"}]}],$t=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pageSelected:0,itemSelected:0,selectedCharacters:[]},n.renderContainer=function(){var e=n.props.modalSizes,t=n.state,a=t.pageSelected,i=t.itemSelected,o=qt[a].items[i],s=n.props.selectedEffects.includes(o.id);return r.a.createElement("div",{style:{width:"95%",display:"flex",justifyContent:"center",color:"white",height:.7*e.height,textAlign:"left",paddingLeft:"2.5%",paddingRight:"2.5%",fontSize:"5vw"}},n.renderCardPreview(o.image,s),n.renderItemButtons())},n.renderCardPreview=function(e,t){return r.a.createElement("div",{style:{maxWidth:"calc(50% - 10px)",paddingRight:9,height:"100%",display:"inline-block"}},r.a.createElement("img",{draggable:!1,src:e,style:{maxWidth:"100%",maxHeight:"100%",border:t?"0.4vh ".concat(b.charTints[2]," solid"):"0.4vh transparent solid"}}))},n.renderItemButtons=function(){var e=n.state,t=e.pageSelected,a=e.itemSelected,i=qt[t];return r.a.createElement("div",{onSelect:function(){return!1},style:{minWidth:"50%",display:"inline-block",verticalAlign:"top"}},i.items.map((function(e,t){return n.renderItemButton(e.name,n.props.selectedEffects.includes(e.id),t===a,t)})))},n.renderItemButton=function(e,t,a,i){return r.a.createElement("div",{style:{minHeight:"10vh",padding:"1vw",lineHeight:"10vh",transition:"0.2s linear all",background:a?"#ffffff40":"#ffffff19",border:t?"0.4vh ".concat(b.charTints[2]," solid"):"0.4vh transparent solid",textAlign:"center",userSelect:"none",verticalAlign:"bottom",marginBottom:"1vh"},onClick:function(){return n.onItemClick(i)}},e)},n.renderSliderIndicatorsRowsContainer=function(){var e=n.props,t=e.classes,a=e.modalSizes,i=n.state.pageSelected,o=a.width/3;return r.a.createElement("div",{className:t.sliderIndicatorRow,style:{width:a.width-2*o,paddingLeft:o,paddingRight:o}},qt.map((function(e,t){return r.a.createElement(Et,{isHealer:!1,isActive:i===t,onClick:function(){return n.onIndicatorClick(t)}},r.a.createElement("img",{draggable:!1,src:e.indicatorImage,style:{maxWidth:"100%",maxHeight:"100%"}}))})))},n.onItemClick=function(e){n.props.itemSelected(qt[n.state.pageSelected].items[e]),n.setState({itemSelected:e})},n.onIndicatorClick=function(e){n.changePage(e)},n.onSwipe=function(e){var t=n.state.pageSelected;e.velocityX>0?--t<0&&(t=qt.length-1):e.velocityX<0&&++t>qt.length-1&&(t=0),n.changePage(t)},n.changePage=function(e){n.props.itemSelected(qt[e].items[0]),n.setState({pageSelected:e,itemSelected:0})},n.renderOverlay=function(){var e=n.props,t=e.classes,a=e.pageSizes;return r.a.createElement("div",{className:K()(t.overlay),style:{top:a.top}})},e.itemSelected(qt[0].items[0]),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.modalSizes;return r.a.createElement("div",null,this.renderOverlay(),r.a.createElement(Ot.a,{onSwipe:this.onSwipe,options:{recognizers:{swipe:{velocity:.6,direction:Hammer.DIRECTION_HORIZONTAL}}}},r.a.createElement("div",{className:K()(t.wrapper,Object(H.a)({},t.visible,!0)),style:{left:n.left,bottom:n.bottom,width:n.width,height:n.height}},r.a.createElement(Pt,{text:qt[this.state.pageSelected].name}),this.renderContainer(),this.renderSliderIndicatorsRowsContainer())))}}]),t}(a.Component),Yt=Object(C.a)({"@keyframes appear":{from:{opacity:0},to:{opacity:1}},"@keyframes disappear":{from:{opacity:1},to:{opacity:0}},"@keyframes disappearP":{from:{opacity:.3},to:{opacity:0}},wrapper:{position:"absolute",background:"black",zIndex:101,userSelect:"none",opacity:0,transition:"0.3s linear all",pointerEvents:"none"},visible:{animationName:"$appear",animationDuration:"0.3s",animationDelay:"0.7s",animationFillMode:"forwards",opacity:0,pointerEvents:"all"},sliderIndicatorRow:{position:"absolute",bottom:"1vh",display:"flex",justifyContent:"space-between",height:"3.5vh"},overlay:{position:"absolute",width:"100%",height:"100%",opacity:0,animationFillMode:"forwards",transition:"0.2s linear all",background:"linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,1) 100%)","&.visible":{animationName:"$appear",animationDelay:"0.7s",animationDuration:"0.3s"}}}),Jt=Object(j.a)(Yt)($t),Zt=function e(t){var n=this;Object(s.a)(this,e),this.onItemChanged=t,this.relativeSizes={w:85,h:55},this.props=null,this.activeEffects=[],this.setProps=function(e){return n.props=e},this.renderModal=function(e){var t=e.sizes,a=e.pageSizes,i={bottom:t.bottom,height:t.height,left:t.left,width:t.width};return r.a.createElement(Jt,{isVisible:!0,pageSizes:a,modalSizes:i,itemSelected:n.onItemChanged,selectedEffects:n.activeEffects})},this.renderBackdrop=function(e){var t=e.sizes,n=e.pageSizes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft,{isVisible:!0,rect:{x:t.left,y:t.pixiTop,width:t.width,height:t.height},pageSizes:n}))}},Qt={relativeSizes:{w:0,h:0},renderBackdrop:function(){return null},renderModal:function(){return null},setProps:function(){}},en=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{selectedArea:null}))).game=n,a.world=void 0,a.getMsg=function(){if(a.state.selectedArea){var e=le(a.state.selectedArea);return We.movementToLocation({locationNo:e,location:ne[e].name})}return We.selectLocation()},a.onUndo=function(){a.routeProps.popState()},a.getAvailableAreas=function(){return[].concat(Object(O.a)(ne[a.world.plagueLocation].connections.flatMap(ue)),Object(O.a)(ue(a.world.plagueLocation)))},a.getMapSnapshot=function(){var e=a.state.selectedArea,t=ue(a.world.plagueLocation),n=Object.fromEntries(te.map((function(e){return[e,"disabled"]})));return ne[a.world.plagueLocation].connections.forEach((function(e){ue(e).forEach((function(e){return n[e]="available"}))})),e?(t.forEach((function(e){return n[e]="passed"})),ee.includes(e)?ee.forEach((function(e){return n[e]="active"})):n[e]="active"):t.forEach((function(e){return n[e]="active"})),{tokens:a.world.inSiege&&!a.state.selectedArea?[{token:"siege",areaKey:pe(a.world.plagueLocation)}]:[],fills:n}},a.areaSelected=function(e){a.getAvailableAreas().includes(e)&&(a.world.inSiege&&a.routeProps.pushMessage(We.cancelSiegeWarning()),a.setState({selectedArea:e}))},a.onAreaConfirmed=function(){a.routeProps.popState();var e=a.state.selectedArea?le(a.state.selectedArea):a.world.plagueLocation;a.routeProps.pushMessage(We.movementToLocation({locationNo:e,location:ne[e].name})),a.game.pushAction({type:"healers-s-plus-movement",to:e})},a.world=Object(h.a)({},n.state()),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this;return{mapSnapshot:this.getMapSnapshot(),mainMsg:We.additionalMove(),msg:this.getMsg(),onMapBottomButtons:function(){return r.a.createElement(G,{iconHref:"icons/undo_button.png",onClick:e.onUndo})},modalController:Qt,bottomButtons:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:"icons/checkmark.png",isActive:!!e.state.selectedArea,onClick:e.onAreaConfirmed}))},onAreaClick:this.areaSelected}}}]),t}(xt),tn=["start","end-plague-turn","end-healers-turn"],nn=function(e,t,n){switch(t.type){case"start":var a={doubleMovement:!1,initialLocation:t.location,plagueLocation:t.location,inSiege:null,statusMsg:an.getStatusMsg(t),turnNo:1};return[].concat(Object(O.a)(e),[{action:t,world:a}]);case"contaminate":var r=Object(h.a)({},n.world,{inSiege:null,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:r}]);case"movement":var i=Object(h.a)({},n.world,{inSiege:null,plagueLocation:t.to,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:i}]);case"siege-start":var o=Object(h.a)({},n.world,{inSiege:n.world.plagueLocation,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:o}]);case"siege-end":var s=Object(h.a)({},n.world,{inSiege:null,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:s}]);case"end-plague-turn":var c=Object(h.a)({},n.world,{statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:c}]);case"healers-m12":var l=Object(h.a)({},n.world,{doubleMovement:t.active,statusMsg:an.getActionName(t)}),u=Y.a.last(e);if(u&&u.action.type===t.type){var p=Y.a.nth(e,-2);return p&&p.world.doubleMovement===t.active?e.slice(0,-1):[].concat(Object(O.a)(e.slice(0,-1)),[{action:t,world:l}])}return[].concat(Object(O.a)(e),[{action:t,world:l}]);case"healers-s-plus-movement":var d=t.to!=n.world.plagueLocation,m=Object(h.a)({},n.world,{plagueLocation:t.to,inSiege:d?null:n.world.inSiege,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:m}]);case"end-healers-turn":var f=Object(h.a)({},n.world,{initialLocation:n.world.plagueLocation,turnNo:n.world.turnNo+1,statusMsg:an.getStatusMsg(t)});return[].concat(Object(O.a)(e),[{action:t,world:f}]);default:return console.error("unknown action",t),e}},an=new(function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"affectedString",value:function(e){if(e.length>1)return We.multipleCharacterKilled({characters:e.map((function(e){return e.name})).join(", ")});var t=e[0];return 0===t.gender?We.characterWoKilled({char:t.name}):We.characterMaKilled({char:t.name})}},{key:"getActionName",value:function(e){switch(e.type){case"start":return We.startOfGame();case"end-plague-turn":case"end-healers-turn":return We.turnEnd();case"movement":return this.getStatusMsg(e);case"contaminate":return We.contaminate();case"siege-start":return We.siegeStarted();case"siege-end":return We.siegeEndSuccessfully();case"healers-m12":return e.active?We.activatedEffect({effect:We.effectm12()}):We.canceledEffect({effect:We.effectm12()});case"healers-s-plus-movement":return We.effectsPlusMovement()}return""}},{key:"getStatusMsg",value:function(e){switch(e.type){case"start":return We.startOfGame();case"contaminate":var t=be.filter((function(t){return e.affected.includes(t.id)}));return this.affectedString(t);case"siege-start":var n=be.filter((function(t){return e.affected.includes(t.id)}));return n.length?We.siegeStartedKilled({killed:this.affectedString(n)}):We.siegeStarted();case"siege-end":var a=be.filter((function(t){return e.affected.includes(t.id)}));return a.length>0?We.siegeEndedKilled({killed:this.affectedString(a)}):We.siegeEndSuccessfully();case"movement":case"healers-s-plus-movement":return We.movementToLocation({locationNo:e.to,location:ne[e.to].name});case"end-plague-turn":return We.turnEnd();case"end-healers-turn":return We.startOfTurn()}}}]),e}()),rn=function(){function e(t){var n,a,r=this;Object(s.a)(this,e),this.actions=void 0,this.persistenceService=void 0,this.lastActionSnapshot=function(){return Y.a.last(r.actions)},this.state=function(){return r.lastActionSnapshot().world},this.lastAction=function(){return r.lastActionSnapshot().action},this.getTurnActions=function(){for(var e=[],t=r.actions.length-1;t>=0;t--){var n=r.actions[t];if(tn.includes(n.action.type))break;e.unshift(n.action)}return e},this.isPlagueTurn=function(){var e=Y.a.findLast(r.actions,(function(e){return tn.includes(e.action.type)}));if(!e)return!0;var t=e.action.type;return"start"===t||"end-healers-turn"===t||"end-plague-turn"!==t},window.game=this,this.persistenceService=null!==(n=null===t||void 0===t?void 0:t.persistenceService)&&void 0!==n?n:new St,this.actions=null!==(a=null===t||void 0===t?void 0:t.actions)&&void 0!==a?a:[]}return Object(c.a)(e,[{key:"pushAction",value:function(e){return this.actions=nn(this.actions,e,this.lastActionSnapshot()),this.persistenceService.writeAll(this.actions),this.lastActionSnapshot().world}},{key:"popAction",value:function(){var e=this.actions.pop();return this.persistenceService.writeAll(this.actions),e}}]),e}(),on=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{selectedItem:null,mapSnapshot:n.mapSnapshot}))).props=n,a.modal=void 0,a.itemSelected=function(e){return a.setState({selectedItem:e})},a.renderBottomButtons=function(){var e=a.state.selectedItem,t=!("m-12"===(null===e||void 0===e?void 0:e.id))||!a.props.game.state().doubleMovement;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:t?"icons/checkmark.png":"icons/cross.png",isActive:!!e,tooltip:{id:"t-apply",tooltipHint:t?We.apply():We.disable(),direction:"top"},onClick:a.activateItem}),r.a.createElement(G,{iconHref:"icons/done_button.png",tooltip:{id:"t-end",tooltipHint:We.finishTurn(),direction:"top"},onClick:a.onDone}))},a.activateItem=function(){var e=a.state.selectedItem,t=a.props.game,n=t.state();switch(e.id){case"m-12":var r=!n.doubleMovement;return t.pushAction({type:"healers-m12",active:r}),r?a.routeProps.pushMessage(We.activatedEffect({effect:e.name})):a.routeProps.pushMessage(We.canceledEffect({effect:e.name})),void a.update();case"s-plus-movement":return void a.routeProps.pushState(new en(a.routeProps,t))}},a.onUndo=function(){var e=a.props.game;if(e.getTurnActions().length){var t=e.popAction().action;a.routeProps.pushMessage(a.getCanceledActionStr(t))}},a.getCanceledActionStr=function(e){switch(e.type){case"healers-m12":return e.active?We.canceledEffect({effect:We.effectm12()}):We.effectm12();case"healers-s-plus-movement":return We.canceledEffect({effect:We.effectsPlusMovement()})}},a.onDone=function(){a.props.game.pushAction({type:"end-healers-turn"}),a.routeProps.popState()},a.modal=new Zt(a.itemSelected),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this;return this.modal.activeEffects=this.props.game.state().doubleMovement?["m-12"]:[],{mainMsg:We.healersTurn(),msg:We.selectHealersEffects(),mapSnapshot:this.state.mapSnapshot,modalController:this.modal,bottomButtons:this.renderBottomButtons,onMapBottomButtons:function(){return r.a.createElement(G,{isVisible:!!e.props.game.getTurnActions().length,tooltip:{direction:"top",tooltipHint:We.cancelSpecificAction({action:an.getActionName(e.props.game.lastAction())}),id:"undo-tooltip"},iconHref:"icons/undo_button.png",onClick:e.onUndo})}}}}]),t}(xt),sn=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{msg:We.startOfTurn()}))).game=n,a.getPhaseDescription=function(){var e=a.game.getTurnActions();if(!e.length)return We.phase({phase:1});if(a.isInAdditionalMovePhase())return We.additionalMove();if(e.some((function(e){return"siege-end"===e.type||"contaminate"===e.type||"siege-start"===e.type})))return We.phase({phase:3});if(a.game.state().doubleMovement&&1===a.getMovements().length)return We.phase({phase:"1-2"});return We.phase({phase:2})},a.renderUndo=function(){return a.game.getTurnActions().length?r.a.createElement(G,{iconHref:"icons/undo_button.png",onClick:a.onUndo,tooltip:{direction:"left",tooltipHint:We.cancelAction(),id:"t-cancel"}}):null},a.renderButtons=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:"icons/contaminate_button.png",isActive:!a.checkContaminate(),onClick:a.onContaminate,tooltip:{id:"t-contaminate",tooltipHint:We.contaminate(),direction:"top"}}),r.a.createElement(G,{iconHref:"icons/done_button.png",onClick:a.onTurnEnd,tooltip:{id:"t-end",tooltipHint:We.finishTurn(),direction:"top"}}),r.a.createElement(G,{iconHref:"icons/siege_button.png",isActive:!a.checkSiege(),onClick:a.onSiege,tooltip:{id:"t-siege",tooltipHint:a.game.state().inSiege?We.finishSiege():We.startSiege(),direction:"top"}}))},a.onAreaClick=function(e){var t=a.game.state(),n=le(e);if(a.checkCanMove(n)){var r=!!t.inSiege;a.game.pushAction({type:"movement",to:n}),a.update(),r&&a.pushMessage(We.siegeCancelledCauseMovement())}},a.checkContaminate=function(){var e=a.game.getTurnActions();return e.some((function(e){return"contaminate"===e.type}))?We.cannotContaminateTwice():e.some((function(e){return"siege-start"===e.type||"siege-end"===e.type}))?We.cannotContaminateCauseSiege():""},a.onContaminate=function(){var e=a.checkContaminate();e?a.pushMessage(e):a.routeProps.pushState(new Kt(a.routeProps,{onCharactersSelected:a.onContaminatedCharacterSelected,emptyOk:!1,turnNo:a.game.state().turnNo}))},a.onContaminatedCharacterSelected=function(e){a.game.pushAction({type:"contaminate",affected:e.map((function(e){return e.id}))}),a.update()},a.onTurnEnd=function(){a.routeProps.pushState(new Xt(a.routeProps,{mapSnapshot:a.getMapSnapshot(),onTurnEnd:a.onTurnEndConfirm}))},a.onTurnEndConfirm=function(){a.game.pushAction({type:"end-plague-turn"}),a.routeProps.pushState(new on(a.routeProps,{mapSnapshot:a.getMapSnapshot(),game:a.game}))},a.checkSiege=function(){var e=a.game.state(),t=a.game.getTurnActions(),n=e.inSiege,r=a.getCurrentLocation();if(n){if(t.some((function(e){return"siege-start"===e.type})))return We.cannotEndSiegeOnSameTurn();if(!!t.length||n!==r)return We.cannotEndSiege()}else{if(t.some((function(e){return"siege-end"===e.type})))return We.cannotStartSiegeCauseSiege();if(!!a.getMovements().length)return We.cannotStartSiegeCauseMovements();if(t.some((function(e){return"contaminate"===e.type})))return We.cannotStartSiegeCauseContamination()}return""},a.onSiege=function(){var e=a.game.state(),t=e.inSiege,n=a.checkSiege();n?a.pushMessage(n):t?a.routeProps.pushState(new Kt(a.routeProps,{onCharactersSelected:a.onCharactersSieged,emptyOk:!0,turnNo:e.turnNo})):a.routeProps.pushState(new Kt(a.routeProps,{onCharactersSelected:a.onSiegeStarted,emptyOk:!0,turnNo:e.turnNo}))},a.onSiegeStarted=function(e){a.game.pushAction({type:"siege-start",affected:e.map((function(e){return e.id}))}),a.update()},a.onCharactersSieged=function(e){a.game.pushAction({type:"siege-end",affected:e.map((function(e){return e.id}))}),a.update()},a.onUndo=function(){a.game.getTurnActions().length&&(a.game.popAction(),a.update())},a.getMapSnapshot=function(){return{fills:a.getAreaFills(),tokens:a.getTokens()}},a.getAreaFills=function(){for(var e=a.getCurrentLocation(),t={},n=function(e,n){if(0===e){var a=!0,r=!1,i=void 0;try{for(var o,s=ee[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;t[c]=n}}catch(l){r=!0,i=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}}else t[pe(e)]=n},r=0;r<=15;r++){var i=a.checkCanMove(r),o=a.isLocationPassed(r),s=r===e;n(r,a.getFill(i,o,s))}return t},a.getTokens=function(){var e=a.game.state();return e.inSiege?ue(e.inSiege).map((function(e){return{areaKey:e,token:"siege"}})):[]},a.checkCanMove=function(e){var t=a.game.state(),n=a.game.getTurnActions(),r=t.doubleMovement,i=a.getCurrentLocation();if(!(ne.find((function(e){return e.number===i})).connections.indexOf(e)>=0))return!1;if(!n.length)return!0;if(a.isInAdditionalMovePhase())return!0;var o=n.findIndex((function(e){return"siege-end"===e.type||"contaminate"===e.type||"siege-start"===e.type}));if(o>-1&&o<n.length-1)return!1;var s=a.getMovements();return s.length>0?!!r&&s.length<2:!t.inSiege},a.isInAdditionalMovePhase=function(){var e=a.game.lastAction();return("siege-end"===e.type||"contaminate"===e.type||"siege-start"===e.type)&&!!e.affected.length},a.pushMessage=function(e){a.routeProps.pushMessage(e)},a.getMovements=function(){return a.game.getTurnActions().filter((function(e){return"movement"===e.type}))},a.isLocationPassed=function(e){var t=a.getMovements(),n=a.game.state().initialLocation;return t.length>0&&(n===e||t.some((function(t){return t.to===e})))},a.getCurrentLocation=function(){var e=a.game.state().initialLocation,t=a.getMovements();return t.length?t[t.length-1].to:e},a.getFill=function(e,t,n){return n?"active":t?e?"passed-available":"passed":e?"available":"disabled"},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this.game.state();return{mainMsg:We.turnNo({turn:e.turnNo})+" - "+this.getPhaseDescription(),mapSnapshot:this.getMapSnapshot(),bottomButtons:this.renderButtons,msg:e.statusMsg,onAreaClick:this.onAreaClick,onMapBottomButtons:this.renderUndo,onMapTopButtons:function(){return r.a.createElement(G,{iconHref:"icons/double_movement.png",isVisible:e.doubleMovement,tooltip:{id:"d-dmov",tooltipHint:We.doubleMovement(),direction:"left"}})}}}}]),t}(xt),cn=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rn;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e,{selectedArea:null}))).game=a,n.onSelected=function(){n.routeProps.popState(),n.game.pushAction({type:"start",location:le(n.state.selectedArea)}),n.routeProps.pushState(new sn(n.routeProps,n.game))},n.getMsg=function(){if(!n.state.selectedArea)return We.selectAreaToStartFrom();var e=le(n.state.selectedArea),t=ne[e].name;return We.startingLocation({locationNo:e,location:t})},n.getFills=function(){var e=Object.fromEntries(te.map((function(e){return[e,"available"]})));return n.state.selectedArea?(ee.includes(n.state.selectedArea)?ee.forEach((function(t){return e[t]="active"})):e[n.state.selectedArea]="active",e):e},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this;return{msg:this.getMsg(),mainMsg:We.startOfGame(),mapSnapshot:{fills:this.getFills(),tokens:[]},onAreaClick:function(t){e.setState({selectedArea:t})},bottomButtons:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:"icons/checkmark.png",onClick:e.onSelected,isVisible:!!e.state.selectedArea,tooltip:{id:"t-start",tooltipHint:We.startOfGame(),direction:"top"}}))}}}}]),t}(xt),ln={start:1,movement:2,contaminate:3,"siege-start":4,"siege-end":5,"end-plague-turn":6,"healers-m12":7,"healers-s-plus-movement":8,"end-healers-turn":9},un=Object.fromEntries(Object.entries(ln).map((function(e){var t=Object(fe.a)(e,2),n=t[0];return[t[1],n]}))),pn=function(e,t){return((e="boolean"==typeof e?e?1:0:e)>>>0).toString(2).padStart(t,"0")},dn=function(e,t,n){var a=e.substr(t.pointer,n),r=parseInt(a,2);return t.pointer+=n,r},hn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-",mn=new(function(){function e(){var t=this;Object(s.a)(this,e),this.version=1,this.deserializeActionType=function(e,t){var n=dn(e,t,4);return n?un[n]:null},this.deserializeAction=function(e,n,a){switch(e){case"siege-end":case"siege-start":case"contaminate":for(var r=dn(n,a,4),i=[],o=0;o<r;o++)i.push(t.deserializeChar(dn(n,a,4)).id);return{type:e,affected:i};case"healers-m12":return{type:e,active:!!dn(n,a,1)};case"movement":return{type:e,to:dn(n,a,4)};case"start":return{type:e,location:dn(n,a,4)};case"healers-s-plus-movement":return{type:e,to:dn(n,a,4)};case"end-healers-turn":case"end-plague-turn":return{type:e}}return console.error("Unknown type",e),{type:e}},this.serializeAction=function(e){var n=pn(ln[e.type],4);switch(e.type){case"start":n+=pn(e.location,4);break;case"contaminate":case"siege-end":case"siege-start":var a=e.affected;n+=pn(a.length,4)+a.map(t.serializeChar).join("");break;case"movement":case"healers-s-plus-movement":n+=pn(e.to,4);break;case"healers-m12":n+=pn(e.active,1)}return n}}return Object(c.a)(e,[{key:"serialize",value:function(e){var t=pn(this.version,2);return function(e){var t="";e.length%6>0&&(e+="0".repeat(e.length%6));for(var n=0;n<e.length;n+=6){var a=e.substr(n,6).padStart(6,"0"),r=parseInt(a,2);t+=hn[r]}return t}(t+=e.map(this.serializeAction).join("")+"0000")}},{key:"deserialize",value:function(e){for(var t=function(e){var t="",n=!0,a=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t+=hn.indexOf(s).toString(2).padStart(6,"0")}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}(e),n={pointer:0},a=(dn(t,n,2),[]);n.pointer<t.length;){var r=this.deserializeActionType(t,n);if(!r)break;var i=this.deserializeAction(r,t,n);a.push(i)}return a}},{key:"serializeChar",value:function(e){var t=be.findIndex((function(t){return t.id===e}));if(t<0)throw Error(e);return pn(t,4)}},{key:"deserializeChar",value:function(e){return be[e]}}]),e}());Ve((function(){return window.urlSerialier=mn}));var fn=Object(C.a)({"@keyframes appear":{from:{opacity:0},to:{opacity:1}},"@keyframes disappear":{from:{opacity:1},to:{opacity:0}},"@keyframes disappearP":{from:{opacity:.3},to:{opacity:0}},overlay:{position:"absolute",width:"100%",height:"100%",opacity:0,animationFillMode:"forwards",transition:"0.2s linear all",background:"linear-gradient(90deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 50%, rgba(0,0,0,1) 100%)","&.visible":{animationName:"$appear",animationDelay:"0.7s",animationDuration:"0.3s"},"&.kill":{opacity:.3,animationName:"$disappearP",animationDelay:"".concat(jt.destructionTotal-.3,"s"),animationDuration:"0.3s"},"&.hidden":{opacity:1,animationName:"$disappear",animationDuration:"0.3s"}}}),gn=Object(j.a)(fn)((function(e){var t=e.classes,n=e.pageSizes,a=e.mode;return r.a.createElement("div",{className:K()(t.overlay,{visible:"visible"===a,kill:"killed-and-hidden"===a,hidden:"hidden"===a}),style:{top:n.top}})})),vn=function(){function e(t){var n=this;Object(s.a)(this,e),this.characters=t,this.relativeSizes={w:85,h:32},this.disposed=!1,this.props=null,this.disposeEnd=function(){n.props&&(n.disposed=!0,n.props.update())},setTimeout(this.disposeEnd,1e3*(jt.destructionTotal+1))}return Object(c.a)(e,[{key:"renderBackdrop",value:function(e){if(this.disposed)return null;var t=e.sizes,n=e.pageSizes;return r.a.createElement(Gt,{allSelectedCharacters:this.characters,selectedCharacter:this.characters[0],sizes:t,pageSizes:n,position:{x:0,y:0,height:10,width:10},mode:"killed-and-hidden"})}},{key:"renderModal",value:function(e){return this.disposed?null:r.a.createElement(gn,{pageSizes:e.pageSizes,mode:"killed-and-hidden"})}},{key:"setProps",value:function(e){this.props=e}}]),e}(),yn=n(132),bn=(n(231),n(232),function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,{}))).persistenceService=n,a.renderMenuModal=function(){return r.a.createElement("div",{style:{position:"absolute",zIndex:300,width:"100%",height:"100%",backgroundColor:"#00000066"}},r.a.createElement("div",{style:{position:"absolute",width:"50vmax",height:"70vh",backgroundColor:"#000000",border:"1px solid red",left:"calc(50% - 25vmax)",top:"17.5vh"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(G,{iconHref:"icons/cross.png",onClick:function(){return a.routeProps.popState()},styles:{padding:"1vh"}})),r.a.createElement("div",{onClick:a.onNewGame,style:{color:"white",fontSize:"6vh",paddingTop:"2vh"}},We.startNew()),r.a.createElement("div",{onClick:a.onSaveGameReplay,style:{color:"white",fontSize:"6vh",paddingTop:"2vh"}},We.saveGameReplay()),r.a.createElement("div",{onClick:a.onReturnToGame,style:{color:"white",fontSize:"6vh",paddingTop:"2vh"}},We.returnToGame())))},a.onNewGame=function(){a.persistenceService.writeAll([]),a.routeProps.clearAll();var e=new URLSearchParams(document.location.search);e.delete("r");var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e.toString();window.history.replaceState(null,"",t),setTimeout((function(){return a.routeProps.pushState(new cn(a.routeProps))}),0)},a.onSaveGameReplay=function(){var e,t,n;return q.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=new URLSearchParams(""),r.next=3,q.a.awrap(a.persistenceService.getAll());case 3:if(t=r.sent){r.next=6;break}return r.abrupt("return");case 6:e.append("r",mn.serialize(t.map((function(e){return e.action})))),n=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e.toString(),prompt("",n);case 9:case"end":return r.stop()}}))},a.onReturnToGame=function(){a.routeProps.clearAll();var e=new URLSearchParams(document.location.search);e.delete("r");var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e.toString();window.history.replaceState(null,"",t),setTimeout((function(){return a.routeProps.pushState(new kn(a.routeProps))}),0)},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this;return{customComponent:function(t){return e.renderMenuModal()}}}}]),t}(xt)),xn={currentAction:""};Ve((function(e){var t=e.addFolder("replay");t.add(xn,"currentAction").listen(),t.open()}));var wn=function e(t){var n=this;Object(s.a)(this,e),this.index=0,this.actions=[],this.precedingInSameTurn=function(){var e=n.actions.slice(0,n.index);if(0===n.index)return[];var t=n.actions[n.index].world.turnNo;return Y.a.takeRightWhile(e,(function(e){return e.world.turnNo===t}))},this.havePrev=function(){return n.index>0},this.haveNext=function(){return!!(n.actions.length&&n.index<n.actions.length-1)},this.current=function(){return n.actions[n.index]},this.moveNext=function(){return n.haveNext()?n.actions[++n.index]:n.current()},this.movePrev=function(){return n.havePrev()?n.actions[--n.index]:n.current()};var a=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var l=o.value;this.actions=nn(this.actions,l,Y.a.last(this.actions))}}catch(u){r=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}},Sn=function(e){function t(e,n,a){var i;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e,{modal:Qt,isPlaying:!1}))).actions=n,i.persistenceService=a,i.iterator=void 0,i.timer=null,i.isPlaying=function(){return!!i.timer},i.getFocusOnLocation=function(){var e=i.iterator.current().world;if(0!==e.plagueLocation)return pe(e.plagueLocation);if(!i.iterator.havePrev())return"steppe02";switch(i.iterator.actions[i.iterator.index-1].world.plagueLocation){case 1:case 2:return"steppe01";case 8:case 14:case 13:case 6:case 7:return"steppe03";default:return"steppe02"}},i.renderSlider=function(e){var t=T(e.viewport,10,"vw"),n=e.viewport.width-2*t,a=2*window.devicePixelRatio,o={};return i.iterator.actions.forEach((function(e,t){"end-healers-turn"===e.action.type&&(o[t]=e.world.turnNo)})),r.a.createElement("div",{style:{position:"absolute",width:n/a,left:(e.viewport.width-n/a)/2,height:50,bottom:e.bottom,zIndex:200,transform:"scale(".concat(a,")")}},r.a.createElement(yn.a,{min:0,max:i.iterator.actions.length-1,value:i.iterator.index,onChange:function(e){i.iterator.index=e,i.playAction(i.iterator.current()),i.disableTimer(),i.update()},trackStyle:{backgroundColor:"#811000"},handleStyle:{borderColor:"#811000"},activeDotStyle:{borderColor:"#811000"},marks:o}))},i.togglePlay=function(){i.isPlaying()?i.disableTimer():i.resetTimer(),i.update()},i.disableTimer=function(){clearTimeout(i.timer),i.timer=null},i.resetTimer=function(){i.disableTimer(),i.timerTick()},i.timerTick=function(){i.iterator.haveNext()?(i.playNext(),i.timer=setTimeout(i.timerTick,i.getDelay(i.iterator.current().action.type))):i.disableTimer(),i.update()},i.getDelay=function(e){switch(e){case"movement":case"healers-s-plus-movement":return 1e3;case"contaminate":case"siege-start":case"siege-end":return 2e3;default:return 1300}},i.playNext=function(){do{i.iterator.moveNext()}while(i.iterator.haveNext()&&tn.includes(i.iterator.current().action.type));i.playAction(i.iterator.current())},i.playPrev=function(){do{i.iterator.movePrev()}while(i.iterator.havePrev()&&tn.includes(i.iterator.current().action.type));i.playAction(i.iterator.current())},i.playAction=function(e){var t=e.action;switch(t.type){case"contaminate":var n=t.affected.map((function(e){return be.find((function(t){return t.id===e}))}));i.setState({modal:n.length>0?new vn(n):Qt});break;case"siege-start":var a=t.affected.map((function(e){return be.find((function(t){return t.id===e}))}));i.setState({modal:a.length>0?new vn(a):Qt});break;case"siege-end":var r=t.affected.map((function(e){return be.find((function(t){return t.id===e}))}));i.setState({modal:r.length>0?new vn(r):Qt});break;case"healers-m12":default:i.setState({modal:Qt})}i.update()},i.getFills=function(){var e=Object.fromEntries(te.map((function(e){return[e,"available"]}))),t=i.iterator.current().world;return i.iterator.precedingInSameTurn().forEach((function(t){return ue(t.world.plagueLocation).forEach((function(t){return e[t]="passed-available"}))})),ue(t.initialLocation).forEach((function(t){return e[t]="passed-available"})),ue(t.plagueLocation).forEach((function(t){return e[t]="active"})),e},i.getTokens=function(){var e=i.iterator.current().world;return e.inSiege?ue(e.inSiege).map((function(e){return{areaKey:e,token:"siege"}})):[]},i.iterator=new wn(n),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){var e=this,t=this.iterator.current(),n=t.world,a=t.action;return Ve((function(){return xn.currentAction=a.type})),{mainMsg:We.turnNo({turn:n.turnNo}),msg:n.statusMsg,bottomButtons:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{iconHref:"icons/prev.png",unpressableInnactive:!0,isActive:e.iterator.havePrev(),onClick:e.playPrev}),r.a.createElement(G,{iconHref:e.isPlaying()?"icons/pause.png":"icons/play.png",unpressableInnactive:!0,isActive:e.iterator.haveNext(),onClick:e.togglePlay}),r.a.createElement(G,{iconHref:"icons/next.png",unpressableInnactive:!0,isActive:e.iterator.haveNext(),onClick:e.playNext}))},modalController:this.state.modal,mapSnapshot:{fills:this.getFills(),tokens:this.getTokens(),focusOn:this.getFocusOnLocation()},onMapTopButtons:function(){return r.a.createElement(G,{iconHref:"icons/double_movement.png",isVisible:n.doubleMovement,tooltip:{id:"d-dmov",tooltipHint:We.doubleMovement(),direction:"left"}})},customComponent:this.renderSlider,onMenuClick:function(){return e.routeProps.pushState(new bn(e.routeProps,e.persistenceService))}}}}]),t}(xt),kn=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new St;Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e,{}))).persistenceService=a,n.restoreFromUrl=function(e){try{var t=mn.deserialize(e);n.routeProps.popState(),n.routeProps.pushState(new Sn(n.routeProps,t,n.persistenceService))}catch(a){console.log("Error parsing url",a),n.onLoaded(null)}},n.onLoaded=function(e){if(n.routeProps.popState(),e){var t=new rn({persistenceService:n.persistenceService,actions:e});if(t.isPlagueTurn())n.routeProps.pushState(new sn(n.routeProps,t));else{var a=new sn(n.routeProps,t);n.routeProps.pushState(a),n.routeProps.pushState(new on(n.routeProps,{game:t,mapSnapshot:a.getMapSnapshot()}))}}else n.routeProps.pushState(new cn(n.routeProps))};var r=new URLSearchParams(document.location.search).get("r");return r?setTimeout((function(){return n.restoreFromUrl(r)}),0):kt.getAll().then(n.onLoaded),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderProps",value:function(){return{mainMsg:We.restoringGameState()}}}]),t}(xt),On={state:"",inStack:0};Ve((function(e){var t=e.addFolder("State Router");t.add(On,"state").listen(),t.add(On,"inStack").listen(),t.open()}));var jn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={appStates:[],transition:null,transientMessage:null},n.defaultUiProps={mapSnapshot:{tokens:[],fills:Object.fromEntries(te.map((function(e){return[e,"disabled"]})))},msgAccented:!1,onMenuClick:function(){n.pushState(new bn(n.getRouteProps(),new St))}},n.getRouteProps=function(){return{pushState:n.pushState,popState:n.popState,update:n.update,pushMessage:n.pushMsg,removeMsg:n.removeMsg,clearAll:n.clearAll}},n.clearAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({transientMessage:null,appStates:[],transition:e})},n.removeMsg=function(){n.setState({transientMessage:null})},n.pushMsg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a={text:e};n.setState({transientMessage:a}),setTimeout((function(){n.state.transientMessage===a&&n.setState({transientMessage:null})}),t)},n.pushState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.setState({appStates:[].concat(Object(O.a)(n.state.appStates),[e]),transition:t}),t&&t.promise.then((function(e){n.state.transition===e&&n.setState({transition:null})}))},n.popState=function(e){n.state.appStates.splice(-1,1),n.setState({appStates:Object(O.a)(n.state.appStates),transition:e||n.state.transition}),e&&e.promise.then((function(e){n.state.transition===e&&n.setState({transition:null})}))},n.update=function(){n.forceUpdate()},n.state.appStates=[new kn(n.getRouteProps())],n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this;Ve((function(){var e;On.state=(null===(e=Y.a.last(t.state.appStates))||void 0===e?void 0:e.constructor.name)||"(no)",On.inStack=t.state.appStates.length}));var n=Object.assign.apply(Object,[{},this.defaultUiProps].concat(Object(O.a)(this.state.appStates.map((function(e){return e.renderProps()}))),[null===(e=this.state.transition)||void 0===e?void 0:e.renderProps(),this.state.transientMessage?{msg:this.state.transientMessage.text,msgAccented:!0}:null]));return r.a.createElement(yt,n)}}]),t}(a.Component);window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1};var Cn=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{width:"100vw",height:"100vh"}},r.a.createElement(d.a,{theme:S({width:document.body.clientWidth,height:document.body.clientHeight})},r.a.createElement(jn,null))))}}]),t}(r.a.Component),En=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(Cn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/pathologic-companion",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/pathologic-companion","/service-worker.js");En?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Tn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Tn(t,e)}))}}()},29:function(e){e.exports=JSON.parse('[{"number":0,"name":"\u0421\u0442\u0435\u043f\u044c","connections":[1,2,3,4,5,6,7]},{"number":1,"name":"\u041f\u043b\u043e\u0449\u0430\u0434\u044c \u041c\u043e\u0441\u0442","connections":[0,2,11]},{"number":2,"name":"\u0421\u0442\u0432\u043e\u0440\u043a\u0438","connections":[0,1,3]},{"number":3,"name":"\u041f\u043e\u0447\u043a\u0430","connections":[0,2,4,11]},{"number":4,"name":"\u0416\u0435\u0440\u043b\u043e","connections":[0,3,5,11,12]},{"number":5,"name":"\u0421\u043a\u043b\u0430\u0434\u044b","connections":[0,4,12]},{"number":6,"name":"\u0417\u0430\u0432\u043e\u0434\u044b","connections":[0,7,13]},{"number":7,"name":"\u0421\u044b\u0440\u044b\u0435 \u0437\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","connections":[0,6,13]},{"number":8,"name":"\u041a\u043e\u0436\u0435\u0432\u0435\u043d\u043d\u044b\u0439","connections":[13,14]},{"number":9,"name":"\u0420\u0435\u0431\u0440\u043e","connections":[10,14,15]},{"number":10,"name":"\u0421\u0435\u0434\u043b\u043e","connections":[9,11,15]},{"number":11,"name":"\u0421\u0435\u0440\u0434\u0435\u0447\u043d\u0438\u043a","connections":[1,3,4,10,12,15]},{"number":12,"name":"\u0423\u0442\u0440\u043e\u0431\u0430","connections":[4,5,11,13,15]},{"number":13,"name":"\u0416\u0438\u043b\u044c\u043d\u0438\u043a\u0438","connections":[6,7,8,12,14]},{"number":14,"name":"\u0414\u0443\u0431\u0438\u043b\u044c\u0449\u0438\u043a\u0438","connections":[8,9,13]},{"number":15,"name":"\u0425\u0440\u0435\u0431\u0442\u043e\u0432\u043a\u0430","connections":[9,10,11,12]}]')}},[[136,1,2]]]);
//# sourceMappingURL=main.580cc32c.chunk.js.map